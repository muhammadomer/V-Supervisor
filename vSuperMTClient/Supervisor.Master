<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Supervisor.Master.cs" Inherits="vSuperMTClient.Supervisor.Supervisor" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<!DOCTYPE html>
<html lang="en">
<head runat="server">
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css">
    <link href="styles/font-awesome.min.css" rel="stylesheet" />
    <link href="styles/simple-line-icons.min.css" rel="stylesheet" />
    <link href="styles/bootstrap.min.css" rel="stylesheet" />
    <link href="styles/uniform.default.css" rel="stylesheet" />
    <link href="styles/jquery-ui.min.css" rel="stylesheet" />

    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL STYLES -->
    <link href="styles/dataTables.bootstrap.css" rel="stylesheet" />
    <link href="styles/bootstrap-datetimepicker.min.css" rel="stylesheet" />
    <link href="styles/jquery.toastmessage.css" rel="stylesheet" />
    <link href="styles/style.min.css" rel="stylesheet" />
    <link href="styles/bootstrap-switch.min.css" rel="stylesheet" />
    <link href="styles/bootstrap-multiselect.css" rel="stylesheet" />
    <link href="styles/bootstrap-select.min.css" rel="stylesheet" />
    <link href="styles/select2.css" rel="stylesheet" />
    <link href="styles/multi-select.css" rel="stylesheet" />
    <link href="styles/square/red.css" rel="stylesheet" />
    <link href="styles/bootstrap-fileinput.css" rel="stylesheet" />
    <!-- END PAGE LEVEL STYLES -->
    <!-- BEGIN THEME STYLES -->
    <link href="styles/components.css" rel="stylesheet" />
    <link href="styles/plugins.css" rel="stylesheet" />
    <link href="styles/layout.css" rel="stylesheet" />
    <link href="styles/grey.css" rel="stylesheet" />
    <link href="styles/custom.css" rel="stylesheet" />
    <!-- END THEME STYLES -->
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <title>vSupervisor</title>

    <!-- BEGIN CORE PLUGINS -->
    <script src="scripts/jquery-1.11.1-jquery.min.js"></script>
    <script src="scripts/jquery-migrate.min.js"></script>
    <script src="scripts/jquery-ui.min.js"></script>
    <script src="scripts/bootstrap.min.js"></script>
    <script src="scripts/jquery.blockui.min.js"></script>
    <script src="scripts/jquery.cokie.min.js"></script>
    <script src="scripts/jquery.uniform.min.js"></script>
    <script src="scripts/bootstrap-switch.min.js"></script>
    <script src="scripts/components-pickers.js"></script>
    <!-- END CORE PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src="scripts/jquery.dataTables.min.js"></script>
    <script src="scripts/bootstrap-select.min.js"></script>
    <script src="scripts/select2.min.js"></script>
    <script src="scripts/jquery.multi-select.js"></script>
    <script src="scripts/jquery.slimscroll.min.js"></script>
    <script src="scripts/jstree.min.js"></script>
    <script src="scripts/bootstrap-hover-dropdown.min.js"></script>
    <script src="scripts/dataTables.bootstrap.js"></script>
    <script src="scripts/moment.min.js"></script>
    <script src="scripts/bootstrap-datetimepicker.min.js"></script>
    <script src="scripts/bootstrap-multiselect.js"></script>
    <script src="scripts/amcharts.js"></script>
    <script src="scripts/serial.js"></script>
    <script src="scripts/pie.js"></script>
    <script src="scripts/light.js"></script>

    <script src="scripts/jquery.toastmessage.js"></script>
    <script src="scripts/icheck.min.js"></script>
    <script src="scripts/bootstrap-fileinput.js"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="scripts/metronic.js"></script>
    <script src="scripts/layout.js"></script>
    <script src="scripts/components-dropdowns.js"></script>
    <script src="scripts/components-jqueryui-sliders.js"></script>
    <script src="scripts/ui-tree.js"></script>
    <%--  <script src="scripts/form-icheck.js"></script>--%>
    <!-- END PAGE LEVEL SCRIPTS -->

    <script>
        jQuery(document).ready(function () {
            Metronic.init();
            
            Layout.init();
            ComponentsPickers.init();
            ComponentsjQueryUISliders.init();
            ComponentsDropdowns.init();
            UITree.init();
            FillDepartmentDropDown()
        });
    </script>
      
    
</head>
<%--<body class="page-boxed page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-closed-hide-logo" oncontextmenu="return false">--%>
<body class="page-boxed page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid page-sidebar-closed-hide-logo">
    <form id="form1" runat="server">
        <div class="page-header navbar navbar-fixed-top">
            <div class="page-header-inner container-fluid">
                <div class="page-top">
                    <div class="row" style="padding-top: 10px;">
                        <div class="col-md-4" style="padding-left: 0px;">

                            <div id="MenuDashboard" class="col-md-3" style="width: 85px; padding-left: 10px; padding-right: 5px;" onclick="RedirectToDashboard();">
                                <div id="HeaderLinkDashboard" class="DeactiveHeaderLink">
                                    <i class="fa fa-bars headeri"></i>
                                    <span class="headerspan">Dashboard</span>
                                </div>
                            </div>
                            <div id="MenuAgents" class="col-md-3" style="width: 80px; padding-left: 5px; padding-right: 5px;" onclick="RedirectToAgents();" runat="server">
                                <div id="HeaderLinkAgents" class="DeactiveHeaderLink">
                                    <i class="fa fa-user headeri"></i>
                                    <span class="headerspan">Agents</span>
                                </div>
                            </div>
                            <div id="MenuSettings" class="col-md-3" style="width: 80px; padding-left: 5px; padding-right: 5px;" onclick="ShowSettingsModal();" runat="server">
                                <div id="HeaderLinkSettings" class="DeactiveHeaderLink">
                                    <i class="fa fa-wrench headeri"></i>
                                    <span class="headerspan">Settings</span>
                                </div>
                            </div>
                            <div id="MenuLicensing" class="col-md-3" style="width: 80px; padding-left: 5px; padding-right: 5px;" onclick="RedirectToLicensing();" runat="server">
                                <div id="HeaderLinkLicensing" class="DeactiveHeaderLink">
                                    <i class="fa fa-id-card headeri"></i>
                                    <span class="headerspan">Licensing</span>
                                </div>
                            </div>

                        </div>

                        <div class="col-md-8" style="text-align: right">
                            <i id="imgSocketServerConnectState" class="fa fa-plug" style="font-size: 30px; padding-top: 8px; color: #f91627; display: none;"></i>
                            <ul class="nav navbar-nav pull-right">
                                <li class="dropdown dropdown-user">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true" style="padding-right: 0px; background-color: #c0c0c0;">
                                        <div style="margin-top: 8px">
                                            <img src="Content/images/user_icon_top.png" class="img-circle" style="width: 30px;" />
                                            <%--<i class="fa fa-user" style="font-size: 20px"></i>--%>
                                            <input type="hidden" id="currentUserName" runat="server" />
                                            <span class="username username-hide-on-mobile" id="UserName" runat="server" style="color: white"></span>
                                            <i class=" fa fa-angle-down" style="color: white"></i>
                                        </div>
                                    </a>
                                    <ul class="dropdown-menu dropdown-menu-default">
                                        <li>
                                            <a class="" data-toggle='modal' href='#ModalChangePassword'><i class="fa fa-lock"></i>Change Password</a>
                                        </li>
                                        <li>
                                            <a onclick="LogOut()"><i class='icon-key'></i>Log Out </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix">
        </div>
        <div class="container-fluid">
            <div class="page-container">
                <div class="page-content-wrapper">
                    <div class="page-content">
                        <div id="ModalChangePassword" data-backdrop="static" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog" id="" style="width: 500px; height: 100%">
                                <div class="modal-content">
                                    <div class="row" style="line-height: 35px; background-color: #ffffff; width: 100%; margin-left: 0%; vertical-align: middle; border-bottom: 1px solid #e5e5e5;">
                                        <div class="col-md-11" style="margin-top: 5px;">
                                            <span style="font-size: 16px; color: #404040;">Change Password</span>
                                        </div>
                                    </div>


                                    <div id="ErrorDivChangePassword" class="row" style="display: none;">
                                        <div class="col-md-12" style="text-align: center;">
                                            <label class="Label" style="color: red;" id="lblErrorChangePassword"></label>
                                        </div>
                                    </div>
                                    <div class="row" style="padding-top: 10px;">
                                        <div class="col-md-4">
                                            <label class="control-label">Enter Old Password</label>

                                        </div>

                                        <div class="col-md-8">
                                            <asp:TextBox ID="txbOldPassword" runat="server" CssClass="form-control" TextMode="Password"></asp:TextBox>
                                        </div>
                                    </div>
                                    <div class="row" style="padding-top: 10px;">
                                        <div class="col-md-4">
                                            <label class="control-label">Enter New Password</label>
                                        </div>

                                        <div class="col-md-8">
                                            <asp:TextBox ID="txbNewPassword" runat="server" CssClass="form-control" TextMode="Password"></asp:TextBox>
                                        </div>

                                    </div>
                                    <div class="row" style="padding-top: 10px;">
                                        <div class="col-md-4">
                                            <label class="control-label">Confirm Password</label>

                                        </div>

                                        <div class="col-md-8">
                                            <asp:TextBox ID="txbConfirmNewPassword" runat="server" CssClass="form-control" TextMode="Password"></asp:TextBox>
                                        </div>
                                    </div>

                                    <div class="row" style="padding-top: 10px; padding-bottom: 10px;">
                                        <div class="col-md-12" style="text-align: right;">
                                            <button type="button" data-dismiss="modal" class="btnFlat">Close</button>
                                            <button type="button" class="btnFlat" onclick="ChangePassword()">Save changes</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="AgentsModal" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false" style="">
                            <div class="modal-dialog" style="width: 800px; height: 100%">
                                <div class="modal-content">
                                    <div class="row" style="line-height: 35px; background-color: #ffffff; width: 100%; margin-left: 0%; vertical-align: middle; border-bottom: 1px solid #e5e5e5;">
                                        <div class="col-md-11" style="margin-top: 5px;">
                                            <span style="font-size: 18px; color: #404040;">Agents</span>
                                        </div>
                                        <div class="col-md-1" style="margin-top: 0%; text-align: right" onclick="CloseAgentModal();">
                                            <span style="font-size: 20px; color: black;">
                                                <i class="fa fa-times"></i>
                                            </span>
                                        </div>
                                    </div>
                                    <div id="ErrorDivAgents" class="row" style="padding-top: 5px; padding-bottom: 5px; display: none;">
                                        <div class="col-md-12" style="">
                                            <label class="Label" style="color: red" id="lblErrorAgents"></label>
                                        </div>
                                        <input id="txbAgentId" type="text" class="col-md-12 form-control" style="display: none;" />
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="SettingsModal" aria-hidden="true" data-backdrop="static" data-keyboard="false" style="">
                            <div class="modal-dialog" style="width: 840px; height: 100%">
                                <div class="modal-content" style="padding: 15px">
                                    <div class="row" style="line-height: 35px; background-color: #ffffff; width: 100%; margin-left: 0%; vertical-align: middle; border-bottom: 1px solid #e5e5e5;">
                                        <div class="col-md-11" style="margin-top: 1px;">
                                            <span style="font-size: 18px; color: #404040;">Settings</span>
                                        </div>
                                        <div class="col-md-1" style="margin-top: 0%; text-align: right; cursor: pointer" onclick="CloseSettingsModal();">
                                            <span style="font-size: 20px; color: black;">
                                                <i class="fa fa-times"></i>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="row" style="padding-top: 10px;">
                                        <div class="col-md-2" style="">
                                            <div class="row" style="padding-bottom: 10px;">
                                                <div class="input-group">
                                                    <span id="SettingLeftMenuCosting" class="input-group-addon SettingsSpanDeactive" onclick="ShowCosting();">
                                                        <i class="fa fa-cog" style="padding-right: 2px; display: block; font-size: 24px; padding-top: 5px;"></i>General
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-bottom: 10px;">
                                                <div class="input-group">
                                                    <span id="SettingLeftMenuPrefrences" class="input-group-addon SettingsSpanDeactive" onclick="ShowPrefrences();">
                                                        <i class="fa fa-wrench" style="padding-right: 2px; display: block; font-size: 24px; padding-top: 5px;"></i>System
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="row" style="padding-bottom: 10px;">
                                                <div class="input-group">
                                                    <span id="SettingLeftMenuUsers" class="input-group-addon SettingsSpanDeactive" onclick="ShowUsers();">
                                                        <i class="fa fa-user" style="padding-right: 2px; display: block; font-size: 24px; padding-top: 5px;"></i>Users 
                                                    </span>

                                                </div>
                                            </div>
                                            <div class="row" style="padding-bottom: 10px;">
                                                <div class="input-group">
                                                    <span id="SettingLeftMenuExternalRouting" class="input-group-addon SettingsSpanDeactive" onclick="ShowExternalRouting();">
                                                        <i class="fa fa-arrow-right" style="padding-right: 2px; display: block; font-size: 24px; padding-top: 5px;"></i>Sys. Routing 
                                                    </span>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-10" style="padding: 0px; border-left: 1px solid  #4f4e4f;">
                                            <div id="ErrorDivSettings" class="row" style="padding-top: 5px; padding-bottom: 5px; display: none;">
                                                <div class="col-md-12" style="">
                                                    <label class="Label" style="color: red" id="lblErrorSettings"></label>
                                                </div>
                                            </div>
                                            <div id="SettingRightMenuCosting" class="row rightmenu" style="display: none">
                                                <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">
                                                        <div id="btnSettingCallRates" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingsCallRates();">
                                                            <span style="font-size: 16px; color: #fffeff;">Call Types</span>
                                                        </div>
                                                        <%--<div id="btnSettingRecordingRates" class="col-md-3 SettingsTabDeActive" style="width: 22%;" onclick="ShowSettingsRecordingRates();">
                                                            <span style="font-size: 16px; color: #fffeff;">Recording Rates</span>
                                                        </div>--%>
                                                        <div id="btnSettingExtensions" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingsExtensions();">
                                                            <span style="font-size: 16px; color: #fffeff;">Directory</span>
                                                        </div>
                                                        <div id="btnSettingAreaCodes" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingsAreaCodes();">
                                                            <span style="font-size: 16px; color: #fffeff;">Area Codes</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingCallRates" style="display: none;">
                                                    <div class="row">
                                                        <input id="txbCostingId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Call Type</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-map-marker "></i>
                                                                        </span>
                                                                        <input type="text" id="txbCostType" class="form-control" placeholder="Specify Call Type" maxlength="50" list="CallTypes" />
                                                                        <datalist id="CallTypes">

                                                                            <option>Local</option>
                                                                            <option>National</option>
                                                                            <option>Mobile</option>
                                                                            <option>Premium</option>
                                                                            <option>Free</option>
                                                                            <option>International Landline</option>
                                                                            <option>International Mobile</option>
                                                                            <option>Service Numbers</option>
                                                                        </datalist>

                                                                    </div>


                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Dial Prefix</label>
                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <input id="txbCostingDialNumber" type="text" class="form-control" style="border-bottom: 0px !important;" placeholder="Specify Dial Prefix" maxlength="5" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                        <span class="input-group-btn" style="vertical-align: bottom">
                                                                            <button type="button" id="btnCostingAddDialNumber" class="btn green" onclick="btnCostingAddDialNumber_Click();" style="padding: 7px 14px;"><i class="fa fa-plus"></i></button>
                                                                        </span>
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <select id="lstCostingDialNumbers" class="form-control" multiple="multiple" style="width: 100%; height: 70px;">
                                                                        </select>
                                                                        <span class="input-group-btn" style="vertical-align: bottom">
                                                                            <button type="button" id="btnCostingRemoveDialNumber" class="btn green" onclick="btnCostingRemoveDialNumber_Click();" style="padding: 7px 14px;"><i class="fa fa-trash"></i></button>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 1px solid black">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddCosting" class="col-md-4" style="text-align: right;">
                                                            <button type="button" onclick="AddCosting();" id="btnAddCosting" class="btnFlat">Create</button>
                                                        </div>
                                                        <div id="divUpdateCosting" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateCosting();" id="btnCosting" class="btnFlat">Update</button>
                                                            <button type="button" onclick="CancelEditCosting();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblCosting" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingRecordingRates" style="display: none;">
                                                    <div class="row">
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label id="lblRecordingPerMinute" class="Label" style=""></label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-money"></i>
                                                                        </span>
                                                                        <input id="txbDurationCostPerMinute" type="text" class="form-control" placeholder="Specify Connection Cost" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label id="lblStoragePerMinute" class="Label" style=""></label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-money"></i>
                                                                        </span>
                                                                        <input type="text" id="txbDiskCostPerMB" class="form-control" placeholder="Specify Cost Per Second" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row" style="padding-top: 50px; padding-bottom: 10px">

                                                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                                        </div>
                                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="">
                                                            <button type="button" class="btnFlat" onclick="UpdateRecordingRates()" style="float: right;">Apply</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingExtensions" style="display: none; padding-left: 10px;">
                                                 <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">                                                       
                                                        <div id="btnSettingExtensionsInternal" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingsExtensionsInternal();">
                                                            <span style="font-size: 16px; color: #fffeff;">Internal</span>
                                                        </div>
                                                         <div id="btnSettingExtensionsExternal" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingsExtensionsExternal();">
                                                            <span style="font-size: 16px; color: #fffeff;">External</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                    <div class="row" id="SettingExtensionsInternal" style="display: none;">
                                                    <div class="row">
                                                        <input id="txbExtensionId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">First Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbExtensionFirstName" type="text" class="form-control" placeholder="Please enter First Name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                             <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Department</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-building "></i>
                                                                        </span>
                                                                      
                                                                       
                                                                        <select class="form-control " id="chosen-select" data-placeholder="Please select Department" multiple="multiple" name="DepartmentIDs[]">
                                                                           
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Extension</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-phone-square "></i>
                                                                        </span>
                                                                        <input type="text" id="txbExtension" class="form-control" placeholder="Please enter Extension" maxlength="12" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>


                                                                </div>
                                                            </div>
                                                              
                                                        </div>

                                                        <div class="col-md-6" style="padding: 0px;">
                                                             <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Last Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbExtensionLastName" type="text" class="form-control" placeholder="Please enter Last Name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>

                                                               <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">E-Mail</label>
                                                                 <%--    <label class="Label" style="font-size: 12px;"> (Required for Console BLF)</label>--%>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-envelope "></i>
                                                                        </span>
                                                                        <input class="form-control" type="text" name="email" id="extensionEmail" value="" placeholder="Please enter E-Mail" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            

                                                            

                                                           
                                                        </div>
                                                        
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 5px;display: flex;">
                                                                 <div style="width: 115px;padding-top: 5px;padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Call Logging</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">

                                                                        <input type="checkbox" id="chkExtensionEnabled" class="make-switch" data-on-text="Yes" data-off-text="No" data-on-color="success" data-off-color="danger" />
                                                                    </div>
                                                                </div>
                                                                     </div>
                                                               <div style="width: 115px;padding-top: 5px;padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Dashboard</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">

                                                                        <input type="checkbox" id="chkDashboardEnabled" class="make-switch" data-on-text="Yes" data-off-text="No" data-on-color="success" data-off-color="danger" />
                                                                    </div>
                                                                </div>
                                                                     </div>
                                                           <div style="width: 115px;padding-top: 5px;padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Console</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">

                                                                        <input type="checkbox" id="chkConsoleEnabled" class="make-switch" data-on-text="Yes" data-off-text="No" data-on-color="success" data-off-color="danger" />
                                                                    </div>
                                                                </div>
                                                                     </div>
                                                            </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 1px solid #6b696a">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddExtension" class="col-md-4" style="text-align: right;">
                                                            <button type="button" onclick="AddExtension();" id="btnAddExtension" class="btnFlat">Create</button>
                                                        </div>
                                                        <div id="divUpdateExtension" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateExtension();" id="btnExtension" class="btnFlat">Update</button>
                                                            <button type="button" onclick="CancelEditExtension();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblExtensions" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                        </div>
                                                    <div class="row" id="SettingExtensionsExternal" style="display: none;">
                                                     <div class="row">
                                                        <input id="txbDirectoryId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">First Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbDirectoryFirstName" type="text" class="form-control" placeholder="Please enter First Name" maxlength="100" />
                                                                    </div>
                                                                </div>
                                                            </div>   
                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                             <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Last Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbDirectoryLastName" type="text" class="form-control" placeholder="Please enter Last Name" maxlength="100" />
                                                                    </div>
                                                                </div>
                                                            </div>                                                              
                                                        </div>                                                        
                                                    </div>
                                                   <%-- <div class="row">                                                       
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Display Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbDirectoryDisplay" type="text" class="form-control" placeholder="Please enter display name" maxlength="100" />
                                                                    </div>
                                                                </div>
                                                            </div>   
                                                        </div>                                                                                                 
                                                    </div>--%>
                                                    <div class="row">                                                       
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Company</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-building"></i>
                                                                        </span>
                                                                        <input id="txbDirectoryCompany" type="text" class="form-control" placeholder="Please enter company name" maxlength="100" />
                                                                    </div>
                                                                </div>
                                                            </div>   
                                                        </div>   
                                                           <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Work</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-phone-square "></i>
                                                                        </span>
                                                                        <input type="text" id="txbDirectoryWork" class="form-control" placeholder="Please enter Number" maxlength="20" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>   
                                                        </div>      
                                                    </div>
                                                    <div class="row"> 
                                                         <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Home</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-phone-square "></i>
                                                                        </span>
                                                                        <input type="text" id="txbDirectoryHome" class="form-control" placeholder="Please enter Number" maxlength="20" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>   
                                                        </div>                                                     
                                                         <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Mobile</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-phone-square "></i>
                                                                        </span>
                                                                        <input type="text" id="txbDirectoryMobile" class="form-control" placeholder="Please enter Number" maxlength="20" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>   
                                                        </div>      
                                                    </div>                                                  
                                                    <div class="row">                                                       
                                                                                                                                                  
                                                    </div>                                                  
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 1px solid #6b696a">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddDirectory" class="col-md-4" style="text-align: right;">
                                                            <button type="button" onclick="AddContact();" id="btnAddDirectory" class="btnFlat">Create</button>
                                                        </div>
                                                        <div id="divUpdateDirectory" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateContact();" id="btnDirectory" class="btnFlat">Update</button>
                                                            <button type="button" onclick="CancelEditContact();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblContacts" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                        </div>
                                                </div>
                                                <div class="row" id="SettingAreaCodes" style="display: none;">

                                                    <div class="row">
                                                        <input id="txbAreaCodeId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Area Code</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbAreaCode" type="text" class="form-control" placeholder="Please enter Area Code" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Area Description</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbAreaDescription" type="text" class="form-control" placeholder="Please enter Area Description" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 1px solid #6b696a">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddAreaCode" class="col-md-4" style="text-align: right;">
                                                            <button type="button" onclick="AddAreaCode();" id="btnAddAreaCode" class="btnFlat">Create</button>
                                                        </div>
                                                        <div id="divUpdateAreaCode" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateAreaCode();" id="btnUpdateAreaCode" class="btnFlat">Update</button>
                                                            <button type="button" onclick="CancelEditAreaCode();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblAreaCodes" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="SettingRightMenuPrefrences" class="row rightmenu" style="display: none">

                                                <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">

                                                        <div id="btnSettingPrefrences" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingPrefrences();">
                                                            <span style="font-size: 16px; color: #fffeff;">Prefrences</span>
                                                        </div>
                                                        <div id="btnSettingSMTP" class="col-md-3 SettingsTabDeActive" style="width: 22%;" onclick="ShowSettingSMTP();">
                                                            <span style="font-size: 16px; color: #fffeff;">SMTP</span>
                                                        </div>
                                                        <div id="btnSettingCompanyInfo" class="col-md-3 SettingsTabDeActive" style="width: 22%;" onclick="ShowSettingCompanyInfo();">
                                                            <span style="font-size: 16px; color: #fffeff;">Company Info</span>
                                                        </div>
                                                         <div id="btnSettingReportOptions" class="col-md-3 SettingsTabDeActive" style="width: 22%;" onclick="ShowReportOptions()">
                                                            <span style="font-size: 16px; color: #fffeff;">Report Option</span>
                                                        </div>


                                                    </div>
                                                </div>
                                                <div class="row" id="SettingPrefrences" style="display: none;">
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 0px">

                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">PBX IP</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPBXIP" class="form-control" maxlength="16" oninput="this.value = this.value.replace([0-9]*\.?[0-9]*, '');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 0px">

                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Working Hours</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesWorkingHours" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, '');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px; display:none">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Hangup Threshold (Sec)</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesHangupThreshold" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 0px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Internal Digit Length</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesInternalLength" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 0px; display:none">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Ring Time Threshold (Sec)</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesRingTimeThreshold" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    
                                                <%--     <div class="row" style="padding-top: 15px; padding-bottom: 0px;">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 0px; font-weight:bold;">Agent Scoring</label>
                                                        </div>                                                        
                                                    </div>
                                                    
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px;">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Availability Hours</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentAvalibalityHours" class="form-control" maxlength="3"  max="24" min="0.5" step=".5" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Availability Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentAvalibalityHoursScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>                                                        
                                                    </div>
                                                     <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentCallsAnsweredWithInNSec" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                          <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Seconds</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentCallsAnsweredWithInNSecScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>                                                       
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 0px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Total Calls Answered Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentCallsAnsweredScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                       
                                                    </div>


                                                    <div class="row" style="padding-top: 15px; padding-bottom: 0px;">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 0px; font-weight:bold;">Supervisor Scoring</label>
                                                        </div>                                                        
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsAnsweredWithInNSec" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                         <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Seconds</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsAnsweredWithInNSecScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                    </div>
                                                     <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Waiting Less Than</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsWaitedWithInNSec" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                           <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Seconds</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Waiting Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsWaitedWithInNSecScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Total Calls Answered Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsAnsweredScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                    </div>--%>
                                                   <%-- <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Currency</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <select id="lstPrefrencesCurrency" class="form-control">
                                                                <option value="Euro">Euros ()</option>
                                                                <option value="Dollar">Dollars ($)</option>
                                                                <option value="Pound">Pounds ()</option>
                                                            </select>
                                                        </div>
                                                    </div>--%>

                                                    <div class="row" style="padding-top: 10px; padding-bottom: 10px">

                                                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                                        </div>
                                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="text-align: right;">
                                                            <button type="button" class="btnFlat" onclick="UpdatePrefrences()">Apply</button>
                                                        </div>
                                                    </div>
                                                </div>


                                                 <div class="row" id="ReportOptions" style="display: none;">
                                                    <%--<div class="row" style="padding-top: 15px; padding-bottom: 0px">

                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">PBX IP</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPBXIP" class="form-control" maxlength="16" oninput="this.value = this.value.replace([0-9]*\.?[0-9]*, '');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 0px">

                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Working Hours</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesWorkingHours" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, '');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px; display:none">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Hangup Threshold (Sec)</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesHangupThreshold" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 0px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Internal Digit Length</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesInternalLength" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 0px; display:none">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Ring Time Threshold (Sec)</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesRingTimeThreshold" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>--%>
                                                    
                                                     <div class="row" style="padding-top: 15px; padding-bottom: 0px;">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 0px; font-weight:bold;">Agent Scoring</label>
                                                        </div>                                                        
                                                    </div>
                                                    
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px;">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Availability Hours</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentAvalibalityHours" class="form-control" maxlength="3"  max="24" min="0.5" step=".5" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Availability Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentAvalibalityHoursScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>                                                        
                                                    </div>
                                                     <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentCallsAnsweredWithInNSec" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                          <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Seconds</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentCallsAnsweredWithInNSecScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>                                                       
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 0px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Total Calls Answered Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbAgentCallsAnsweredScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                       
                                                    </div>


                                                    <div class="row" style="padding-top: 15px; padding-bottom: 0px;">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 0px; font-weight:bold;">Queue Scoring</label>
                                                        </div>                                                        
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsAnsweredWithInNSec" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                         <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Seconds</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Answered Within Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsAnsweredWithInNSecScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                    </div>
                                                     <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Waiting Less Than</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsWaitedWithInNSec" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                           <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Seconds</label>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Calls Waiting Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsWaitedWithInNSecScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 0px; padding-bottom: 5px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Total Calls Answered Score</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <input type="number" id="txbQCallsAnsweredScore" class="form-control" maxlength="3"  max="100" min="0" step="1" />
                                                        </div>
                                                    </div>
                                                                           <div class="row" style="padding-top: 10px; padding-bottom: 10px">

                                                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                                        </div>
                                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="text-align: right;">
                                                            <button type="button" class="btnFlat" onclick="UpdateReportOptions()">Apply</button>
                                                        </div>
                                                    </div>
                                                   <%-- <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Currency</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <select id="lstPrefrencesCurrency" class="form-control">
                                                                <option value="Euro">Euros ()</option>
                                                                <option value="Dollar">Dollars ($)</option>
                                                                <option value="Pound">Pounds ()</option>
                                                            </select>
                                                        </div>
                                                    </div>--%>

                               
                                                </div>














                                                <div class="row" id="SettingSMTP" style="display: none;">
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">

                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Host</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="text" id="txbSMTPHost" class="form-control" maxlength="50" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Port</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="text" id="txbSMTPort" class="form-control" maxlength="6" />
                                                        </div>
                                                    </div>
                                                    <input id="txbUserId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">User Name</label>

                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="text" id="txbSMTUserName" class="form-control" maxlength="50" />

                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Password</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="password" id="txbSMTPassword" class="form-control" maxlength="50" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Enable SSL</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-6 col-md-5 col-lg-5" style="">
                                                            <input type="checkbox" id="chkEnableSSL" class="make-switch" data-on-text="Yes" data-off-text="No"
                                                                data-on-color="success" data-off-color="danger" />
                                                        </div>

                                                    </div>
                                                    <div class="row" style="padding-top: 10px; padding-bottom: 10px">

                                                        <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
                                                        </div>
                                                        <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5" style="">
                                                            <button type="button" class="btnFlat" onclick="SaveSMTPSettings()" style="float: right;">Apply</button>
                                                            <button type="button" class="btnFlat" onclick="TestEmail()" style="float: right; margin-right: 10px">Test</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingCompanyInfo" style="display: none;">
                                                    <div class="row">
                                                        <div class="col-md-10" style="">
                                                            <div class="row" style="padding-top: 15px; padding-bottom: 10px">

                                                                <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="padding: 0">
                                                                    <label class="control-label" style="">Company Name</label>
                                                                </div>
                                                                <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                                    <input type="text" id="txbCompanyName" class="form-control" maxlength="100" />
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                                <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="padding: 0">
                                                                    <label class="control-label" style="">Company Address</label>
                                                                </div>
                                                                <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                                    <input type="text" id="txbCompanyAddress" class="form-control" maxlength="200" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-2" style="text-align: center; margin-top: 15px">

                                                            <div class="fileinput fileinput-new" data-provides="fileinput">
                                                                <div id="CompanyLogo" class="fileinput-preview thumbnail" data-trigger="fileinput" style="width: 100px; height: 100px; padding: 0;">
                                                                    <%--<img id="AgentDefaultImage" src="AgentsImages/male.jpg" alt="Agent">--%>
                                                                </div>
                                                                <div>
                                                                    <span class="btn default btn-file" style="display: none;">
                                                                        <input id="CompanyLogoFile" onchange="CompanyLogoFileUploaded()" name="..." type="file" accept=".jpg,.gif,.png">
                                                                    </span>
                                                                    <label>Size 300x100</label>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 20px">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="">
                                                            <button type="button" class="btnFlat" onclick="SaveCompanyInfoSettings()" style="float: right;">Apply</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="SettingRightMenuUsers" class="row rightmenu" style="display: none">
                                                <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">
                                                        <div id="btnSettingUsers" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingUsers();">
                                                            <span style="font-size: 16px; color: #fffeff;">Users</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingUsers" style="display: none;">
                                                    <div class="row">
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Display Name</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-user"></i>
                                                                        </span>
                                                                        <input type="text" id="txbDisplayName" class="form-control" placeholder="Please enter the display name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">User Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-user"></i>
                                                                        </span>
                                                                        <input type="text" id="txbUserName" class="form-control" placeholder="Please enter the user name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Password</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-lock"></i>
                                                                        </span>
                                                                        <input id="txbPassword" type="password" class="form-control" placeholder="8-50 Characters" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Email</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-envelope"></i>
                                                                        </span>
                                                                        <input id="txbEmail" type="text" class="form-control" placeholder="Please enter Email address" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Permissions</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <select id="ddlModule" class="form-control" multiple="multiple" style="border: 1px solid #e5e5e5">
                                                                        <%foreach(vSuperMTClient.Entities.Modules Obj in ListModuleObj)
                                                                            {%>
                                                                        <option value="<%=(Obj.moduleID.ToString())%>"><%=(Obj.Name.ToString())%></option>
                                                                        <%}%>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Enabled</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <input type="checkbox" id="cbEnableUser" class="make-switch" data-on-text="Yes" data-off-text="No" data-on-color="success" data-off-color="danger" />
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 2px solid #6b696a">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddUser" class="col-md-4" style="text-align: right;">

                                                            <button type="button" onclick="AddUsers();" id="btnAddUser" class="btnFlat">Create User</button>
                                                        </div>
                                                        <div id="divUpdateUser" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateUsers();" id="btnUpdateUser" class="btnFlat">Update User</button>
                                                            <button type="button" onclick="CancelEditUser();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblUsers" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>
                                            <div id="SettingRightMenuExternalRouting" class="row rightmenu" style="display: none">
                                                <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">
                                                        <div id="btnSettingExternalRouting" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingExternalRouting();">
                                                            <span style="font-size: 16px; color: #fffeff;">Sys. Routing</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingExternalRouting" style="display: none;">
                                                    <div class="row">
                                                        <input id="txbExternalRoutingId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Name</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-user"></i>
                                                                        </span>
                                                                        <input type="text" id="txbExternalRoutingName" class="form-control" placeholder="Please enter the name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Number</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-phone-square"></i>
                                                                        </span>
                                                                        <input type="text" id="txbExternalRoutingNumber" class="form-control" placeholder="Please enter the number" maxlength="15" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Enable</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <input type="checkbox" id="chkExternalRoutingEnabled" class="make-switch" data-on-text="Yes" data-off-text="No" data-on-color="success" data-off-color="danger" />
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 2px solid #6b696a">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddExternalRouting" class="col-md-4" style="text-align: right;">

                                                            <button type="button" onclick="AddExternalRouting();" id="btnAddExternalRouting" class="btnFlat">Create </button>
                                                        </div>
                                                        <div id="divUpdateExternalRouting" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateExternalRouting();" id="btnUpdateExternalRouting" class="btnFlat">Update</button>
                                                            <button type="button" onclick="CancelEditExternalRouting();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblExternalRouting" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="LicensingModal" aria-hidden="true" data-backdrop="static" data-keyboard="false" style="">
                            <div class="modal-dialog" style="width: 810px; height: 100%">
                                <div class="modal-content" style="">
                                    <div class="row" style="line-height: 35px; background-color: #ffffff; width: 100%; margin-left: 0%; vertical-align: middle; border-bottom: 1px solid #e5e5e5;">
                                        <div class="col-md-11" style="margin-top: 5px;">
                                            <span style="font-size: 18px; color: #404040;">Licensing</span>
                                        </div>
                                        <div class="col-md-1" style="margin-top: 0%; text-align: right" onclick="CloseLicensingModal();">
                                            <span style="font-size: 20px; color: black;">
                                                <i class="fa fa-times"></i>
                                            </span>
                                        </div>

                                    </div>

                                    <%-- <div class="row" style="padding-top: 10px;">
                                        <div class="col-md-2" style="">
                                            <div class="row" style="padding-bottom: 10px;">
                                                <div class="input-group">
                                                    <span id="SettingLeftMenuCosting" class="input-group-addon SettingsSpanDeactive" onclick="ShowCosting();">
                                                        <i class="fa fa-database" style="padding-right: 2px; display: block; font-size: 24px; padding-top: 5px;"></i>Billing
                                                           
                                                    </span>

                                                </div>
                                            </div>
                                            <div class="row" style="padding-bottom: 10px;">
                                                <div class="input-group">
                                                    <span id="SettingLeftMenuPrefrences" class="input-group-addon SettingsSpanDeactive" onclick="ShowPrefrences();">
                                                        <i class="fa fa-compass" style="padding-right: 2px; display: block; font-size: 24px; padding-top: 5px;"></i>System
                                                           
                                                    </span>

                                                </div>
                                            </div>
                                            <div class="row" style="padding-bottom: 10px;">
                                                <div class="input-group">
                                                    <span id="SettingLeftMenuUsers" class="input-group-addon SettingsSpanDeactive" onclick="ShowUsers();">
                                                        <i class="fa fa-user" style="padding-right: 2px; display: block; font-size: 24px; padding-top: 5px;"></i>Users 
                                                    </span>

                                                </div>
                                            </div>


                                        </div>
                                        <div class="col-md-10" style="padding: 0px; border-left: 1px solid  #4f4e4f;">
                                            <div id="ErrorDivSettings" class="row" style="padding-top: 5px; padding-bottom: 5px; display: none;">
                                                <div class="col-md-12" style="">
                                                    <label class="Label" style="color: red" id="lblErrorSettings"></label>
                                                </div>

                                            </div>
                                            <div id="SettingRightMenuCosting" class="row rightmenu" style="display: none">
                                                <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">
                                                        <div id="btnSettingCallRates" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingsCallRates();">
                                                            <span style="font-size: 16px; color: #fffeff;">Call Rates</span>
                                                        </div>
                                                        <div id="btnSettingRecordingRates" class="col-md-3 SettingsTabDeActive" style="width: 22%;" onclick="ShowSettingsRecordingRates();">
                                                            <span style="font-size: 16px; color: #fffeff;">Recording Rates</span>
                                                        </div>
                                                        <div id="btnSettingExtensions" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingsExtensions();">
                                                            <span style="font-size: 16px; color: #fffeff;">Extensions</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingCallRates" style="display: none;">
                                                    <div class="row">
                                                        <input id="txbCostingId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Call Type</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-map-marker "></i>
                                                                        </span>
                                                                        <input type="text"  id="txbCostType" class="form-control" placeholder="Specify Call Type" maxlength="50" list="CallTypes" />
                                                                        <datalist id="CallTypes">
 
                                                                            <option>Local</option>
                                                                            <option>National</option>
                                                                            <option>Mobile</option>
                                                                            <option>Premium</option>
                                                                            <option>Free</option>
                                                                            <option>International Landline</option>
                                                                            <option>International Mobile</option>
                                                                            <option>Service Numbers</option>
                                                                        </datalist>
                                                                    
                                                                    </div>


                                                                </div>
                                                            </div>

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label id="lblCostPerSecond" class="Label" style=""></label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-money"></i>
                                                                        </span>
                                                                        <input type="text" id="txbCostPerSec" class="form-control" placeholder="Specify Cost Per Second" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');"  />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label id="lblConnectionCost" class="Label" style=""></label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-money"></i>
                                                                        </span>
                                                                        <input id="txbConnectCost" type="text" class="form-control" placeholder="Specify Connection Cost" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label id="lblCallSetupCost" class="Label" style=""></label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-money"></i>
                                                                        </span>
                                                                        <input id="txbCallSetupCost" type="text" class="form-control" placeholder="Specify Call Setup Cost" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Dial Prefix</label>
                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <input id="txbCostingDialNumber" type="text" class="form-control" style="border-bottom: 0px !important;" placeholder="Specify Dial Prefix" maxlength="5" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');"/>
                                                                        <span class="input-group-btn" style="vertical-align: bottom">
                                                                            <button type="button" id="btnCostingAddDialNumber" class="btn green" onclick="btnCostingAddDialNumber_Click();" style="padding: 7px 14px;"><i class="fa fa-plus"></i></button>
                                                                        </span>
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <select id="lstCostingDialNumbers" class="form-control" multiple="multiple" style="width: 100%; height: 70px;">
                                                                        </select>
                                                                        <span class="input-group-btn" style="vertical-align: bottom">
                                                                            <button type="button" id="btnCostingRemoveDialNumber" class="btn green" onclick="btnCostingRemoveDialNumber_Click();" style="padding: 7px 14px;"><i class="fa fa-trash"></i></button>
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 1px solid black">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddCosting" class="col-md-4" style="text-align: right;">
                                                            <button type="button" onclick="AddCosting();" id="btnAddCosting" class="btnFlat">Create</button>
                                                        </div>
                                                        <div id="divUpdateCosting" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateCosting();" id="btnCosting" class="btnFlat">Update</button>
                                                            <button type="button" onclick="CancelEditCosting();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblCosting" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingRecordingRates" style="display: none;">
                                                    <div class="row">
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label id="lblRecordingPerMinute" class="Label" style=""></label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-money"></i>
                                                                        </span>
                                                                        <input id="txbDurationCostPerMinute" type="text" class="form-control" placeholder="Specify Connection Cost" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label id="lblStoragePerMinute" class="Label" style=""></label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-money"></i>
                                                                        </span>
                                                                        <input type="text" id="txbDiskCostPerMB" class="form-control" placeholder="Specify Cost Per Second" maxlength="10" oninput="this.value = this.value.replace(/[^0-9.]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <div class="row" style="padding-top: 50px; padding-bottom: 10px">

                                                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                                        </div>
                                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="">
                                                            <button type="button" class="btnFlat" onclick="UpdateRecordingRates()" style="float: right;">Apply</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingExtensions" style="display: none;">

                                                    <div class="row">
                                                        <input id="txbExtensionId" type="text" class="col-md-12 form-control" style="display: none;" />
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">First Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbExtensionFirstName" type="text" class="form-control" placeholder="Please enter First Name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Last Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-male"></i>
                                                                        </span>
                                                                        <input id="txbExtensionLastName" type="text" class="form-control" placeholder="Please enter Last Name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Extension</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-phone-square "></i>
                                                                        </span>
                                                                        <input type="text" id="txbExtension" class="form-control" placeholder="Please enter Extension" maxlength="5" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                                    </div>


                                                                </div>
                                                            </div>

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Enable</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">

                                                                        <input type="checkbox" id="chkExtensionEnabled" class="make-switch" data-on-text="Yes" data-off-text="No" data-on-color="success" data-off-color="danger" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 1px solid #6b696a">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddExtension" class="col-md-4" style="text-align: right;">
                                                            <button type="button" onclick="AddExtension();" id="btnAddExtension" class="btnFlat">Create</button>
                                                        </div>
                                                        <div id="divUpdateExtension" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateExtension();" id="btnExtension" class="btnFlat">Update</button>
                                                            <button type="button" onclick="CancelEditExtension();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblExtensions" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="SettingRightMenuPrefrences" class="row rightmenu" style="display: none">

                                                <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">

                                                        <div id="btnSettingPrefrences" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingPrefrences();">
                                                            <span style="font-size: 16px; color: #fffeff;">Prefrences</span>
                                                        </div>
                                                        <div id="btnSettingSMTP" class="col-md-3 SettingsTabDeActive" style="width: 22%;" onclick="ShowSettingSMTP();">
                                                            <span style="font-size: 16px; color: #fffeff;">SMTP</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingPrefrences" style="display: none;">
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">

                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Working Hours</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesWorkingHours" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Hangup Threshold (Sec)</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesHangupThreshold" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Internal Digit Length</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesInternalLength" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Ring Time Threshold (Sec)</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <input type="text" id="txbPrefrencesRingTimeThreshold" class="form-control" maxlength="3" oninput="this.value = this.value.replace(/[^0-9]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4" style="">
                                                            <label class="control-label" style="padding-top: 5px;">Currency</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8" style="">
                                                            <select id="lstPrefrencesCurrency" class="form-control">
                                                                <option value="Euro">Euros ()</option>
                                                                <option value="Dollar">Dollars ($)</option>
                                                                <option value="Pound">Pounds ()</option>
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="row" style="padding-top: 10px; padding-bottom: 10px">

                                                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                                        </div>
                                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="text-align: right;">
                                                            <button type="button" class="btnFlat" onclick="UpdatePrefrences()">Apply</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingSMTP" style="display: none;">
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">

                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Host</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="text" id="txbSMTPHost" class="form-control" maxlength="50" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Port</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="text" id="txbSMTPort" class="form-control" maxlength="6" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">User Name</label>

                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="text" id="txbSMTUserName" class="form-control" maxlength="50" />

                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Password</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="password" id="txbSMTPassword" class="form-control" maxlength="50" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 15px; padding-bottom: 10px">
                                                        <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3" style="">
                                                            <label class="control-label" style="">Enable SSL</label>
                                                        </div>
                                                        <div class="col-xs-12 col-sm-12 col-md-9 col-lg-9" style="">
                                                            <input type="checkbox" id="chkEnableSSL" class="make-switch" data-on-text="Yes" data-off-text="No"
                                                                data-on-color="success" data-off-color="danger" />
                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 10px; padding-bottom: 10px">

                                                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                                        </div>
                                                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3" style="">
                                                            <button type="button" class="btnFlat" onclick="SaveSMTPSettings()" style="float: right;">Apply</button>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div id="SettingRightMenuUsers" class="row rightmenu" style="display: none">
                                                <div class="row" style="width: 100%;">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 SettingsTabsHeader" style="">
                                                        <div id="btnSettingUsers" class="col-md-3 SettingsTabDeActive" style="width: 18%;" onclick="ShowSettingUsers();">
                                                            <span style="font-size: 16px; color: #fffeff;">Users</span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row" id="SettingUsers" style="display: none;">
                                                    <div class="row">
                                                        <div class="col-md-6" style="padding: 0px;">

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label">Display Name</label>
                                                                </div>
                                                                <div class="col-md-12" style="">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-user"></i>
                                                                        </span>
                                                                        <input type="text" id="txbDisplayName" class="form-control" placeholder="Please enter the display name" maxlength="50" />
                                                                    </div>


                                                                </div>
                                                            </div>

                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">User Name</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-user"></i>
                                                                        </span>
                                                                        <input type="text" id="txbUserName" class="form-control" placeholder="Please enter the user name" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Password</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-lock"></i>
                                                                        </span>
                                                                        <input id="txbPassword" type="password" class="form-control" placeholder="8-50 Characters" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6" style="padding: 0px;">
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Email</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <div class="input-group">
                                                                        <span class="input-group-addon">
                                                                            <i class="fa fa-envelope"></i>
                                                                        </span>
                                                                        <input id="txbEmail" type="text" class="form-control" placeholder="Please enter Email address" maxlength="50" />
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Permissions</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <select id="ddlModule" class="form-control" multiple="multiple" style="border: 1px solid #e5e5e5">
                                                                        <%foreach (vSuperMTClient.Entities.Modules Obj in ListModuleObj)
                                                                            {%>
                                                                        <option value="<%=(Obj.moduleID.ToString())%>"><%=(Obj.Name.ToString())%></option>
                                                                        <%}%>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="padding-top: 5px; padding-bottom: 5px;">
                                                                <div class="col-md-12" style="">
                                                                    <label class="Label" style="">Enable</label>
                                                                </div>
                                                                <div class="col-md-12">
                                                                    <input type="checkbox" id="cbEnableUser" class="make-switch" data-on-text="Yes" data-off-text="No" data-on-color="success" data-off-color="danger" />
                                                                </div>
                                                            </div>


                                                        </div>
                                                    </div>
                                                    <div class="row" style="padding-top: 5px; padding-bottom: 10px; border-bottom: 2px solid #6b696a">
                                                        <div class="col-md-8" style="">
                                                        </div>
                                                        <div id="divAddUser" class="col-md-4" style="text-align: right;">

                                                            <button type="button" onclick="AddUsers();" id="btnAddUser" class="btnFlat">Create User</button>
                                                        </div>
                                                        <div id="divUpdateUser" class="col-md-4" style="display: none; text-align: right;">

                                                            <button type="button" onclick="UpdateUsers();" id="btnUpdateUser" class="btnFlat">Update User</button>
                                                            <button type="button" onclick="CancelEditUser();" class="btnFlat">Cancel</button>
                                                        </div>


                                                    </div>
                                                    <div class="row" style="margin-top: 0%; width: 100%;">
                                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="padding: 0px 10px 5px 10px;">
                                                            <table class="table table-striped table-bordered table-hover" id="tblUsers" style="margin-bottom: 0px !important">
                                                                <tbody>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>--%>
                                </div>
                            </div>
                        </div>
                        <div id="ModalDeleteFromCosting" class="modal fade" role="basic" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog" style="padding: 10px">
                                <div class="modal-content" style="width: 440px; margin-left: 15%; margin-top: 18%; padding: 5px;">
                                    <div class="row" style="line-height: 40px; background-color: #ffffff; width: 100%; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 18px; color: #404040;">Delete Costing</span>
                                        </div>
                                    </div>
                                    <div class="row" style="line-height: 30px; background-color: #ffffff; width: 100%; text-align: center; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 16px; color: #404040;">Are you sure you want to Delete?</span>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 5px">

                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <button type="button" class="btnFlat" data-dismiss="modal">Close</button>

                                        </div>
                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <input type="hidden" id="hidDeleteCostingId" />
                                            <button type="button" onclick="DeleteFromCosting();" id="btnDeleteCosting" class="btnFlat">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ModalDeleteFromExtension" class="modal fade" role="basic" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog" style="padding: 10px">
                                <div class="modal-content" style="width: 440px; margin-left: 15%; margin-top: 18%; padding: 5px;">
                                    <div class="row" style="line-height: 40px; background-color: #ffffff; width: 100%; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 18px; color: #404040;">Delete Extension</span>
                                        </div>
                                    </div>
                                    <div class="row" style="line-height: 30px; background-color: #ffffff; width: 100%; text-align: center; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 16px; color: #404040;">Are you sure you want to Delete?</span>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 5px">

                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <button type="button" class="btnFlat" data-dismiss="modal">Close</button>

                                        </div>
                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <input type="hidden" id="hidDeleteExtensionId" />
                                            <button type="button" onclick="DeleteFromExtension();" id="btnDeleteExtension" class="btnFlat">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ModalDeleteFromContact" class="modal fade" role="basic" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog" style="padding: 10px">
                                <div class="modal-content" style="width: 440px; margin-left: 15%; margin-top: 18%; padding: 5px;">
                                    <div class="row" style="line-height: 40px; background-color: #ffffff; width: 100%; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 18px; color: #404040;">Delete Contact</span>
                                        </div>
                                    </div>
                                    <div class="row" style="line-height: 30px; background-color: #ffffff; width: 100%; text-align: center; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 16px; color: #404040;">Are you sure you want to Delete?</span>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 5px">

                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <button type="button" class="btnFlat" data-dismiss="modal">Close</button>

                                        </div>
                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <input type="hidden" id="hidDeleteContactId" />
                                            <button type="button" onclick="DeleteFromContact();" id="btnDeleteContact" class="btnFlat">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ModalDeleteFromAreaCode" class="modal fade" role="basic" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog" style="padding: 10px">
                                <div class="modal-content" style="width: 440px; margin-left: 15%; margin-top: 18%; padding: 5px;">
                                    <div class="row" style="line-height: 40px; background-color: #ffffff; width: 100%; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 18px; color: #404040;">Delete Area Code</span>
                                        </div>
                                    </div>
                                    <div class="row" style="line-height: 30px; background-color: #ffffff; width: 100%; text-align: center; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 16px; color: #404040;">Are you sure you want to Delete?</span>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 5px">

                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <button type="button" class="btnFlat" data-dismiss="modal">Close</button>

                                        </div>
                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <input type="hidden" id="hidDeleteAreaCodeId" />
                                            <button type="button" onclick="DeleteFromAreaCode();" id="btnDeleteAreaCode" class="btnFlat">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ModalDeleteUser" class="modal fade" role="basic" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog" style="padding: 10px">
                                <div class="modal-content" style="width: 440px; margin-left: 15%; margin-top: 18%; padding: 5px;">
                                    <div class="row" style="line-height: 40px; background-color: #ffffff; width: 100%; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 18px; color: #404040;">Delete User</span>
                                        </div>
                                    </div>
                                    <div class="row" style="line-height: 30px; background-color: #ffffff; width: 100%; text-align: center; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 16px; color: #404040;">Are you sure you want to Delete?</span>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 5px">

                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <button type="button" class="btnFlat" data-dismiss="modal">Close</button>

                                        </div>
                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <input type="hidden" id="hidDeleteUserId" />
                                            <button type="button" onclick="DeleteUser();" id="btnDeleteUser" class="btnFlat">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ModalDeleteFromExternalRouting" class="modal fade" role="basic" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false">
                            <div class="modal-dialog" style="padding: 10px">
                                <div class="modal-content" style="width: 440px; margin-left: 15%; margin-top: 18%; padding: 5px;">
                                    <div class="row" style="line-height: 40px; background-color: #ffffff; width: 100%; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 18px; color: #404040;">Delete External Routing</span>
                                        </div>
                                    </div>
                                    <div class="row" style="line-height: 30px; background-color: #ffffff; width: 100%; text-align: center; vertical-align: middle; border-bottom: 1px solid #e5e5e5">
                                        <div class="col-md-12">
                                            <span style="font-size: 16px; color: #404040;">Are you sure you want to Delete?</span>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top: 5px">

                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <button type="button" class="btnFlat" data-dismiss="modal">Close</button>

                                        </div>
                                        <div class="col-md-2" style="width: 80px; float: right">
                                            <input type="hidden" id="hidExternalRoutingId" />
                                            <button type="button" onclick="DeleteFromExternalRouting();" id="btnDeleteFromExternalRouting" class="btnFlat">Delete</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="ModalTestEmail" data-backdrop="static" class="modal fade" role="dialog" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog" id="" style="width: 500px; height: 100%">
                                <div class="modal-content">
                                    <div class="row" style="line-height: 35px; background-color: #ffffff; width: 100%; margin-left: 0%; vertical-align: middle; border-bottom: 1px solid #e5e5e5;">
                                        <div class="col-md-11" style="margin-top: 5px;">
                                            <span style="font-size: 16px; color: #404040;">Test SMTP Settings</span>
                                        </div>
                                    </div>


                                    <div id="ErrorDivTestEmail" class="row" style="display: none;">
                                        <div class="col-md-12" style="text-align: center;">
                                            <label class="Label" style="color: red;" id="lblErrorTestEmail"></label>
                                        </div>
                                    </div>
                                    <div class="row" style="padding-top: 10px;">
                                        <div class="col-md-4">
                                            <label class="control-label">Email</label>
                                        </div>

                                        <div class="col-md-8">
                                            <asp:TextBox ID="txbTestEmail" runat="server" CssClass="form-control" TextMode="Email"></asp:TextBox>
                                        </div>
                                    </div>

                                    <div class="row" style="padding-top: 10px; padding-bottom: 10px;">

                                        <button style="float: right; margin-right: 10px" type="button" data-dismiss="modal" class="btnFlat">Close</button>
                                        <button style="float: right; margin-right: 10px" type="button" class="btnFlat" onclick="SendTestEmail()">Test</button>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="container-fluid">
                            <div class="Index-div-wrapper">
                                <asp:ScriptManager runat="server"></asp:ScriptManager>
                                <asp:ContentPlaceHolder ID="MainContent" runat="server" />
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <script>
        //var wsUri = "";
        //var websocket;
        //var socketInterval = '0';
        //$(document).ready(function () {

        //    LoadWebSocket();
        //});

        //function LoadWebSocket() {
        //    $.ajax({
        //        type: "POST",
        //        url: "Agents.aspx/GetSocketAuthentications",
        //        data: {},
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        success: function (data) {
        //            //UFID = data.d.UFID;
        //            //UserName = data.d.UserName;
        //            //Password = data.d.Password;
        //            //ServerIp = data.d.ServerIp;
        //            wsUri = data.d.WSURI;
        //            if (websocket == null) {
        //                ConfigWebSocket();
        //            }
        //        }
        //    });
        //}
        //function ConfigWebSocket() {

        //    websocket = new WebSocket(wsUri);

        //    websocket.onopen = function (evt) { onOpen(evt) };
        //    websocket.onclose = function (evt) { onClose(evt) };
        //    websocket.onmessage = function (evt) { onMessage(evt) };
        //    websocket.onerror = function (evt) { onError(evt) };
        //    socketInterval += setInterval(ServerHeartBeat, 10000);

        //}
        //function ServerHeartBeat() {
        //    if (websocket.readyState === websocket.CLOSED) {
        //        clearInterval(socketInterval);
        //        ConfigWebSocket();
        //    }
        //    else if (websocket.readyState === websocket.OPEN) {

        //    }
        //}
        //function onOpen(evt) {
        //    console.log("Socket opened.");
        //}
        //function onClose(evt) {
        //    console.log("Socket closed.");
        //}
        //function onError(evt) {
        //    console.log("Error from socket :");
        //}
        //function onMessage(msg) {
        //    console.log(msg);
        //}
        //function SendMessageToWebSocket(Type, Param) {
        //    if (websocket.readyState === websocket.OPEN) {
        //        var msg = { "Type": "" + Type + "", "Value": Param }
        //        msg = JSON.stringify(msg);
        //        websocket.send(msg);
        //    }
        //}
    </script>
    <script>
        var left = 1;
        var center = 1;
        var right = 1;

        $(document).ready(function () {
            //$("#chosen-select").chosen({
            //    no_results_text: "Oops, nothing found!"
            //})
            
            KeepSessionAlive();
            $('#ModalChangePassword').on('hidden.bs.modal', function () {
                $("#ErrorDivChangePassword").hide();
                $("#txbOldPassword").val('');
                $("#txbNewPassword").val('');
                $("#txbConfirmNewPassword").val('');
            });
            Permissionlist();
            $('#cbEnableUser').bootstrapSwitch('state', false);
        });

        function KeepSessionAlive() {
            url = "SessionHeartbeat.ashx?";
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", url, true);
            xmlHttp.send();
            setTimeout(KeepSessionAlive, 120000);
        }


        //
        function ShowSettingsCallRates() {
            $("#SettingRecordingRates").hide();
            $("#SettingExtensions").hide();
            $("#SettingAreaCodes").hide();
            $("#SettingCallRates").show();
            //$("#btnSettingRecordingRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingExtensions").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingAreaCodes").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCallRates").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            GetCosting();
            GetCurrency();
            CancelEditCosting();
        }
        function ShowSettingsRecordingRates() {
            $("#SettingCallRates").hide();
            $("#SettingExtensions").hide();
            $("#SettingAreaCodes").hide();
            $("#SettingRecordingRates").show();
            $("#btnSettingCallRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingExtensions").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingAreaCodes").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            //$("#btnSettingRecordingRates").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            GetRecordingRates();
        }
        function ShowSettingsExtensions() {
            $("#SettingCallRates").hide();
            $("#SettingRecordingRates").hide();
            $("#SettingAreaCodes").hide();
            $("#SettingExtensions").show();
            //$("#btnSettingRecordingRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCallRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingAreaCodes").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingExtensions").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            ShowSettingsExtensionsInternal();
            //GetExtensions();
            //CancelEditExtension();

        }
        function ShowSettingsExtensionsInternal() {
            $("#SettingCallRates").hide();
            $("#SettingRecordingRates").hide();
            $("#SettingAreaCodes").hide();
            $("#SettingExtensions").show();
            $("#SettingExtensionsInternal").show();
            $("#SettingExtensionsExternal").hide();
            //$("#btnSettingRecordingRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCallRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingAreaCodes").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingExtensions").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#btnSettingExtensionsInternal").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#btnSettingExtensionsExternal").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            GetExtensions();
            CancelEditExtension();

        }
        function ShowSettingsExtensionsExternal() {
            $("#SettingCallRates").hide();
            $("#SettingRecordingRates").hide();
            $("#SettingAreaCodes").hide();
            $("#SettingExtensions").show();
            $("#SettingExtensionsInternal").hide();
            $("#SettingExtensionsExternal").show();
            //$("#btnSettingRecordingRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCallRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingAreaCodes").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingExtensions").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#btnSettingExtensionsInternal").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingExtensionsExternal").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            GetContacts();
            CancelEditContact();

        }
        function ShowSettingsAreaCodes() {
            $("#SettingCallRates").hide();
            $("#SettingRecordingRates").hide();
            $("#SettingExtensions").hide();
            $("#SettingAreaCodes").show();
          //  $("#btnSettingRecordingRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCallRates").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingExtensions").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingAreaCodes").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            GetAreaCodes();
            CancelEditAreaCode();

        }
        function ShowSettingPrefrences() {
            $("#SettingPrefrences").show();
            $("#SettingCompanyInfo").hide();
            $("#SettingSMTP").hide();
            $("#ReportOptions").hide();
            $("#btnSettingPrefrences").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#btnSettingCompanyInfo").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingSMTP").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingReportOptions").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            GetPrefrences();

        }
        function ShowReportOptions() {
            $("#ReportOptions").show();
            $("#SettingPrefrences").hide();
            $("#SettingCompanyInfo").hide();
            $("#SettingSMTP").hide();
           
            $("#btnSettingPrefrences").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCompanyInfo").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingReportOptions").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#btnSettingSMTP").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            GetPrefrences();

        }
        function ShowSettingSMTP() {
            $("#SettingPrefrences").hide();
            $("#SettingCompanyInfo").hide();
            $("#ReportOptions").hide();
            $("#SettingSMTP").show();
            $("#btnSettingPrefrences").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCompanyInfo").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingSMTP").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#btnSettingReportOptions").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            GetSMTPSettings();

        }
        function ShowSettingCompanyInfo() {
            $("#SettingPrefrences").hide();
            $("#SettingSMTP").hide();
            $("#ReportOptions").hide();
            $("#SettingCompanyInfo").show();
            $("#btnSettingPrefrences").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingSMTP").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            $("#btnSettingCompanyInfo").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#btnSettingReportOptions").removeClass("SettingsTabActive").addClass("SettingsTabDeActive");
            GetCompanyInfoSettings();
            //GetSMTPSettings();
        }




        function ShowSettingUsers() {

            $("#btnSettingUsers").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#SettingUsers").show();

            GetUsers();
            CancelEditUser();
        }
        function ShowSettingExternalRouting() {

            $("#btnSettingExternalRouting").removeClass("SettingsTabDeActive").addClass("SettingsTabActive");
            $("#SettingExternalRouting").show();

            GetExternalRouting();
            CancelEditExternalRouting();
        }
        function ErrorText(ErrorMsg, ErrorDiv, ErrorLable) {
            ErrorDiv.show();
            ErrorLable.text(ErrorMsg);
        }

        //Change Password
        function Validate() {
            ErrorDiv = $("#ErrorDivChangePassword");
            ErrorLable = $("#lblErrorChangePassword");
            var OldPassword = $("#txbOldPassword").val();
            var NewPassword = $("#txbNewPassword").val();
            var ConfirmPassword = $("#txbConfirmNewPassword").val();
            var CUserName = $("#currentUserName").val().trim();
            //var passwordValidation = validateUserPassword(NewPassword, CUserName);
            var passwordValidation = "true";
            if (OldPassword == "") {
                ErrorText("Please provide old password", ErrorDiv, ErrorLable);
                return false;
            }
            else if (NewPassword == "") {

                ErrorText("Please Provide New Password", ErrorDiv, ErrorLable);
                return false;
            }
            else if (ConfirmPassword == "") {

                ErrorText("Please Confirm Password", ErrorDiv, ErrorLable);
                return false;
            }
            else if (NewPassword != ConfirmPassword) {

                ErrorText("Password Mismatch.Please Confirm The Correct Password", ErrorDiv, ErrorLable);
                return false;
            }
            else if (passwordValidation != "true") {
                ErrorText(passwordValidation, ErrorDiv, ErrorLable);
                return false;
            }
            return true;

        }
        function ChangePassword() {
            if (Validate()) {
                ErrorDiv = $("#ErrorDivChangePassword");
                ErrorLable = $("#lblErrorChangePassword");
                var OldPassword = $("#txbOldPassword").val();
                var NewPassword = $("#txbNewPassword").val();
                var ConfirmPassword = $("#txbConfirmNewPassword").val();
                var Param = { "password": NewPassword, "oldPassword": OldPassword };
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    url: "Users.aspx/ChangePassword",
                    data: JSON.stringify(Param),
                    type: "POST",
                    success: function (data) {
                        if (data.d == "Password Changed Sucessfully") {
                            $("#txbOldPassword").val("");
                            $("#txbNewPassword").val("");
                            $("#txbNewPassword").trigger("change");
                            $("#txbConfirmNewPassword").val("");
                            $('#ModalChangePassword').modal('hide');
                            $().toastmessage('showSuccessToast', data.d);
                        }
                        else {
                            $().toastmessage("showErrorToast", data.d);
                        }
                    }
                });
            }
        }
        function LogOut() {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Users.aspx/LogOut",
                type: "POST",
                success: function (data) {
                    window.location = data.d;
                }
            });
        }
        function CompanyLogoFileUploaded() {
            var CompanyLogoFile = $("#CompanyLogoFile");
            var CompanyLogo = CompanyLogoFile[0].files[0];
            $preview = $('.fileinput-preview')
        }
        //Modals
        function ShowSettingsModal() {
            $("#SettingsModal").modal('show');
            //$(".ActiveHeaderLink").removeClass("ActiveHeaderLink").addClass("DeactiveHeaderLink");
            $("#HeaderLinkSettings").removeClass("DeactiveHeaderLink").addClass("ActiveHeaderLink");
            ShowCosting();
        }
        function CloseSettingsModal() {
            ClearSettingsModal();
            $('#SettingsModal').modal('hide');
            //$(".ActiveHeaderLink").removeClass("ActiveHeaderLink").addClass("DeactiveHeaderLink");
            //$("#HeaderLinkDashboard").removeClass("DeactiveHeaderLink").addClass("ActiveHeaderLink");
            $("#HeaderLinkSettings").removeClass("ActiveHeaderLink").addClass("DeactiveHeaderLink");
            $(".rightmenu").hide();
        }
        function ClearSettingsModal() {
            CancelEditCosting();
            CancelEditExtension();
            CancelEditUser();
            CancelEditExternalRouting();
        }
        //Call Rates
        function ShowCosting() {

            $(".rightmenu").hide();
            ClearSettingsModal();

            $("#SettingRightMenuCosting").show();
            $(".SettingsSpanActive").removeClass("SettingsSpanActive").addClass("SettingsSpanDeactive");
            $("#SettingLeftMenuCosting").removeClass("SettingsSpanDeactive").addClass("SettingsSpanActive");
            ShowSettingsCallRates();

        }
        function isValidDialNumber(DialNumber) {
            return true;
        }
        function GetCosting() {
            $('#tblCosting').empty();
            $.ajax({
                type: "POST",
                url: "Costing.aspx/GetAllCostings",
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var trHTML = '<thead><tr><th>Call Type</th><th>Edit</th><th>Delete</th></tr></thead><tbody></tbody>';
                    $('#tblCosting').append(trHTML);
                    for (var i = 0; i < data.d.length; i++) {
                        var trHTML = '';
                        trHTML += '<tr><td style="width:70%;">' + data.d[i].CostType + '</td>';
                        //trHTML += '<td>' + data.d[i].CostPerSec + '</td>';
                        //trHTML += '<td>' + data.d[i].ConnectCost + '</td>';
                        //trHTML += '<td>' + data.d[i].CallSetupCost + '</td>';

                        trHTML += '<td><a class="edit"  onclick="CostingEdit(\'' + data.d[i].Id + '\',\'' + data.d[i].CostType + '\',\'' + data.d[i].CostPerSec + '\',\'' + data.d[i].ConnectCost + '\',\'' + data.d[i].CallSetupCost + '\',\'' + data.d[i].DialNumber + '\')";>Edit</a></td>';
                        trHTML += '<td><a class="edit" style="padding: 0px;" onclick="showModalDeleteFromCosting(\'' + data.d[i].Id + '\')";>Delete</a></td></tr>';
                        $('#tblCosting').append(trHTML);
                    }
                    $('#tblCosting').dataTable({
                        "pagingType": "full_numbers",
                        destroy: true,
                        "bLengthChange": false,
                        "bPaginate": true,
                        "bFilter": false,
                        "aaSorting": [],
                        "pageLength": 4,
                        "info": false
                    });
                    $('#tblCosting_paginate').parent().addClass("col-md-12").removeClass("col-md-7");
                    //$.fn.DataTable.ext.pager.numbers_length = 5;
                }
            });
        }
        function AddCosting() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var CostingExists = 0;
            var Id = 0;
            var CostType = $('#txbCostType').val();
            //var CostPerSec = $('#txbCostPerSec').val();
            //var ConnectCost = $('#txbConnectCost').val();
            //var CallSetupCost = $('#txbCallSetupCost').val();
            var CostPerSec = 0;
            var ConnectCost = 0;
            var CallSetupCost = 0;
            if (CostType.trim() == "") {
                ErrorText('Please provide Costing Type', ErrorDiv, ErrorLable);
                return;
            }
            //if (CostPerSec.trim() == "") {
            //    CostPerSec = 0;
            //}
            //if (ConnectCost.trim() == "") {
            //    ConnectCost = 0;
            //}
            //if (CallSetupCost.trim() == "") {
            //    CallSetupCost = 0;
            //}
            //if (!$.isNumeric(CostPerSec)) {

            //    ErrorText('Please provide numeric value for Cost Per Sec', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(ConnectCost)) {
            //    ErrorText('Please provide numeric value for Connect Cost', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(CallSetupCost)) {
            //    ErrorText('Please provide numeric value for Call Setup Cost', ErrorDiv, ErrorLable);
            //    return;
            //}

            var Param = { "CostingId": Id, "CostType": CostType };

            $.ajax({
                type: "POST",
                url: "Costing.aspx/CheckIfCostingNameAlreadyExists",
                data: JSON.stringify(Param),
                async: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d === true) {
                        CostingExists = 1;

                    }
                    else {
                        CostingExists = 0;

                    }
                }
            });
            if (CostingExists == 1) {

                ErrorText('Costing with this name already exists.', ErrorDiv, ErrorLable);
                return;
            }
            var DialNumber = ""

            $('#lstCostingDialNumbers option').each(function () {
                DialNumber += "" + $(this).val() + ";"
            });

            Param = { "Id": Id, "CostType": CostType, "CostPerSec": CostPerSec, "ConnectCost": ConnectCost, "CallSetupCost": CallSetupCost, "DialNumber": DialNumber };

            $.ajax({
                type: "POST",
                url: "Costing.aspx/InsertIntoCosting",
                data: "{CostingEntityObj:" + JSON.stringify(Param) + "}",

                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {

                    if (data.d === "1") {
                        $().toastmessage('showSuccessToast', 'Costing added successfully.');
                        CancelEditCosting();
                        GetCosting();
                    }
                    else {
                        $().toastmessage('showErrorToast', 'Error adding  Costing.');
                    }
                }
            });
        }
        function CostingEdit(CostingId, CostType, CostPerSec, ConnectCost, CallSetupCost, DialNumbers) {

            $('#lstCostingDialNumbers').empty();
            $('#txbCostingId').val(CostingId);
            $('#txbCostType').val(CostType);
            $('#txbCostPerSec').val(CostPerSec);
            $('#txbConnectCost').val(ConnectCost);
            $('#txbCallSetupCost').val(CallSetupCost);
            var CostingDialNumbers = DialNumbers.split(";");
            for (var i = 0; i < CostingDialNumbers.length; i++) {
                if (CostingDialNumbers[i] != "")
                    $('#lstCostingDialNumbers').append($('<option>', { value: CostingDialNumbers[i], text: CostingDialNumbers[i] }));
            }
            $('#divAddCosting').hide();
            $('#divUpdateCosting').show();
        }
        function UpdateCosting() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var CostingExists = 0;
            var Id = $('#txbCostingId').val();
            var CostType = $('#txbCostType').val();
            var CostPerSec = 0;
            var ConnectCost = 0;
            var CallSetupCost = 0;
            if (CostType.trim() == "") {
                ErrorText('Please provide Costing Type', ErrorDiv, ErrorLable);
                return;
            }

            var Param = { "CostingId": Id, "CostType": CostType };

            $.ajax({
                type: "POST",
                url: "Costing.aspx/CheckIfCostingNameAlreadyExists",
                data: JSON.stringify(Param),
                async: false,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d === true) {
                        CostingExists = 1;

                    }
                    else {
                        CostingExists = 0;

                    }
                }
            });
            if (CostingExists == 1) {
                ErrorText('Costing with this name already exists.', ErrorDiv, ErrorLable);
                return;
            }

            var DialNumber = ""

            $('#lstCostingDialNumbers option').each(function () {
                DialNumber += "" + $(this).val() + ";"
            });

            Param = { "Id": Id, "CostType": CostType, "CostPerSec": CostPerSec, "ConnectCost": ConnectCost, "CallSetupCost": CallSetupCost, "DialNumber": DialNumber };

            $.ajax({
                type: "POST",
                url: "Costing.aspx/UpdateIntoCosting",
                data: "{CostingEntityObj:" + JSON.stringify(Param) + "}",

                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d === true) {
                        $().toastmessage('showSuccessToast', 'Costing updated successfully.');
                        GetCosting();
                    }
                    else {
                        $().toastmessage('showErrorToast', 'Error updating  Costing.');
                    }
                }
            });
        }
        function CancelEditCosting() {

            $('#lstCostingDialNumbers').empty();
            $('#txbCostingId').val("");
            $('#txbCostType').val("");
            $('#txbCostPerSec').val("");
            $('#txbConnectCost').val("");
            $('#txbCallSetupCost').val("");

            $('#ErrorDivSettings').hide();
            $('#divAddCosting').show();
            $('#divUpdateCosting').hide();
        }
        function showModalDeleteFromCosting(CostingId) {
            $('#ModalDeleteFromCosting').modal('show');
            $('#hidDeleteCostingId').val(CostingId);
        }
        function DeleteFromCosting() {
            var CostingId = $('#hidDeleteCostingId').val();
            var Param = { "CostingId": CostingId }
            //var ConfirmDelete = confirm("Are you sure you want to delete?");
            //if (ConfirmDelete == false) {
            //    return;
            //}
            $.ajax({
                type: "POST",
                url: "Costing.aspx/DeleteFromCostings",
                data: JSON.stringify(Param),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d === "1") {
                        CancelEditCosting();
                        GetCosting();
                        $().toastmessage("showSuccessToast", "Costing deleted successfully.");
                    }
                    else {
                        $().toastmessage("showErrorToast", "Failed to delete Costing.");
                    }
                    $('#ModalDeleteFromCosting').modal('hide');
                    $('#hidDeleteCostingId').val(null);
                }
            });
        }
        function btnCostingAddDialNumber_Click() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var DialNumber = $('#txbCostingDialNumber').val();
            if (isValidDialNumber(DialNumber)) {
                $('#lstCostingDialNumbers').append($('<option>', { value: DialNumber, text: DialNumber }));
                $('#txbCostingDialNumber').val("");
            }
            else {
                ErrorText('Please provide valid Dial Number', ErrorDiv, ErrorLable);
                return;
            }
        }
        function btnCostingRemoveDialNumber_Click() {
            $('#lstCostingDialNumbers option:selected').remove();
        }
        //Recording Rates
        function GetRecordingRates() {

            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Settings.aspx/GetSettings",
                type: "POST",
                asynch: true,
                success: function (data) {
                    $("#txbDiskCostPerMB").val(data.d.DiskCostPerMin);
                    $("#txbDurationCostPerMinute").val(data.d.DurationCostPerMin);
                }
            });
        }
        function UpdateRecordingRates() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var DiskCostPerMin = $("#txbDiskCostPerMB").val();
            var DurationCostPerMin = $("#txbDurationCostPerMinute").val();
            if (!$.isNumeric(DiskCostPerMin)) {
                ErrorText('Please provide numeric value for Disk Cost', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(DurationCostPerMin)) {
                ErrorText('Please provide numeric value for Duration Cost', ErrorDiv, ErrorLable);
                return;
            }
            var Param = { "DiskCostPerMin": DiskCostPerMin, "DurationCostPerMin": DurationCostPerMin };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "settings.aspx/UpdateRecordingRates",
                data: "{SettingsUpdatedInfo:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {
                    ErrorDiv.hide();
                    $().toastmessage("showSuccessToast", "Recording Rates updated successfully.</span>");
                }
            });

        }
        //Extensions
        function GetExtensions() {
            $('#tblExtensions').empty();
            $.ajax({
                type: "POST",
                url: "Extensions.aspx/GetExtensions",
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $('#tblExtensions').empty();
                    var trHTML = '<thead><tr><th>Extension</th><th>First Name</th><th>Last Name</th><th>Logging</th><th>Dashboard</th><th>Console</th><th>Edit</th><th>Delete</th></tr></thead><tbody></tbody>';
                    $('#tblExtensions').append(trHTML);
                    for (i = 0; i < data.d.length; i++) {

                        var trHTML = '';
                        trHTML += '<tr><td>' + data.d[i].Extension + '</td>';
                        trHTML += '<td>' + data.d[i].FirstName + '</td>';
                        trHTML += '<td>' + data.d[i].LastName + '</td>';
                        var Enabled = "";
                        if (data.d[i].Enabled) {
                            Enabled = "Yes";
                        }
                        else {
                            Enabled = "No";
                        }

                        var Dashboard = "";
                        if (data.d[i].IsDashboard) {
                            Dashboard = "Yes";
                        }
                        else {
                            Dashboard = "No";
                        }

                        var Console = "";
                        if (data.d[i].IsConsole) {
                            Console = "Yes";
                        }
                        else {
                            Console = "No";
                        }
                      //  debugger
                        var SelectedDepartments = [];
                        $.each(data.d[i].Departments, function (i, e) {
                            SelectedDepartments.push(e.DepartmentId)
                        });

                        trHTML += '<td>' + Enabled + '</td>';
                        trHTML += '<td>' + Dashboard + '</td>';
                        trHTML += '<td>' + Console + '</td>';
                        var FName = data.d[i].FirstName.replace("'","#$123$#");
                        var LName = data.d[i].LastName.replace("'", "#$123$#");
                        trHTML += '<td><a class="edit"  onclick="ExtensionEdit(\'' + data.d[i].Id + '\',\'' + data.d[i].Extension + '\',\'' + FName + '\',\'' + LName + '\',' + data.d[i].Enabled + ',' + data.d[i].IsDashboard + ',' + data.d[i].IsConsole + ',\'' + SelectedDepartments.join(',') + '\',\'' + data.d[i].Email + '\')";>Edit</a></td>';
                        trHTML += '<td><a class="edit" style="padding: 0px;" onclick="showModalDeleteFromExtension(\'' + data.d[i].Id + '\')";>Delete</a></td></tr>';


                        $('#tblExtensions').append(trHTML);
                    }
                    $('#tblExtensions').dataTable({
                        "pagingType": "full_numbers",
                        destroy: true,
                        "bLengthChange": false,
                        "bPaginate": true,
                        "bFilter": false,
                        "aaSorting": [],
                        "pageLength": 4,
                        "info": false
                    });
                    $('#tblExtensions_paginate').parent().addClass("col-md-12").removeClass("col-md-7");
                }
            });
        }
        function GetContacts() {
            debugger;
            $('#tblContacts').empty();
            $.ajax({
                type: "POST",
                url: "Extensions.aspx/GetContacts",
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $('#tblContacts').empty();
                    var trHTML = '<thead><tr><th>First Name</th><th>Last Name</th><th>Company</th><th>Edit</th><th>Delete</th></tr></thead><tbody></tbody>';
                    $('#tblContacts').append(trHTML);
                    for (i = 0; i < data.d.length; i++) {

                        var trHTML = '';                      
                        trHTML += '<tr><td>' + data.d[i].FirstName + '</td>';
                        trHTML += '<td>' + data.d[i].LastName + '</td>';
                        trHTML += '<td>' + data.d[i].Company + '</td>';
                       
                        //  debugger

                        trHTML += '<td><a class="edit"  onclick="ContactEdit(\'' + data.d[i].Id + '\',\'' + data.d[i].FirstName + '\',\'' + data.d[i].LastName + '\',\'' + data.d[i].Company + '\',\'' + data.d[i].PhoneWork + '\',\'' + data.d[i].PhoneHome + '\',\'' + data.d[i].PhoneMobile + '\')";>Edit</a></td>';
                        trHTML += '<td><a class="edit" style="padding: 0px;" onclick="showModalDeleteFromContact(\'' + data.d[i].Id + '\')";>Delete</a></td></tr>';


                        $('#tblContacts').append(trHTML);
                    }
                    $('#tblContacts').dataTable({
                        "pagingType": "full_numbers",
                        destroy: true,
                        "bLengthChange": false,
                        "bPaginate": true,
                        "bFilter": false,
                        "aaSorting": [],
                        "pageLength": 4,
                        "info": false
                    });
                   // $('#tblExtensions_paginate').parent().addClass("col-md-12").removeClass("col-md-7");
                }
            });
        }
        function FillDepartmentDropDown() {
            $.ajax({
                type: "POST",
                url: "Extensions.aspx/GetAllDepartments",
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    //debugger
                    $("#chosen-select").empty();
                   // console.log(data.d)
                    setTimeout(function () { //$("#ddlQueueType").append($("<option />").val(0).text("--Select--"));
                        $.each(data.d, function (index, item) {
                            $("#chosen-select").append($("<option />").val(item.DepartmentId).text(item.Name));
                        });
                        $('#chosen-select').multiselect({
                            includeSelectAllOption: true,
                            selectAllValue: 'multiselect-all',
                            enableCaseInsensitiveFiltering: true,
                            enableFiltering: true,
                            maxHeight: '300',
                            onSelectAll: function () {
                                $.uniform.update();
                            },

                        });

                    }, 1000);
                }
            });

        }
        function AddExtension() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var ExtensionExists = 0;
            var Id = 0;
            var Extension = $('#txbExtension').val();
            var FirstName = $('#txbExtensionFirstName').val();
            var LastName = $('#txbExtensionLastName').val();
            var Enabled = $('#chkExtensionEnabled').is(":checked");
            var Dashboard = $('#chkDashboardEnabled').is(":checked");
            var IsConsole =  $('#chkConsoleEnabled').is(":checked");
            //chkConsoleEnabled
           
            var email = $('#extensionEmail').val()

            var departmentIDs = $('#chosen-select').val();
            var SelectedDepartments = [];
            if (departmentIDs != null) {
                $.each(departmentIDs, function (i, e) {
                    SelectedDepartments.push({
                        DepartmentId: e,
                    });
                });
            }
            if (Extension == "") {
                ErrorText('Please provide Extension', ErrorDiv, ErrorLable);
                return;
            }
            //if (IsConsole && !isEmail(email)) {
            //    ErrorText('Please provide valid email', ErrorDiv, ErrorLable);
            //    return;
            //}
            var Param = { "Id": Id, "Extension": Extension, "FirstName": FirstName, "LastName": LastName, "Enabled": Enabled, "IsDashboard": Dashboard, "IsConsole": IsConsole, "Departments": SelectedDepartments, "Email": email };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Extensions.aspx/AddExtension",
                data: "{ExtensionsEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1_") > -1) {
                        $().toastmessage("showSuccessToast", "Extension added sucessfully.");

                        //var ExtensionId = data.d.split('_')[1];
                        //var AccountId = data.d.split('_')[2];

                        //var Param = { "AccountId": AccountId, "EntityId": ExtensionId };
                        //SendMessageToWebSocket("ADD_Extension", Param);

                        GetExtensions();
                        CancelEditExtension();
                    }
                    else if (data.d.indexOf("2_") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while adding the extension.");
                    }
                    else if (data.d.indexOf("3_") > -1) {
                        $().toastmessage("showErrorToast", "Extension with same name already exists.");
                    }
                    else if (data.d.indexOf("4_") > -1) {
                        $().toastmessage("showErrorToast", "Extension not exist in Account numbering plan.");
                    }
                }
            });
        }
        function ExtensionEdit(ExtensionId, Extension, FirstName, LastName, Enabled, Dashboard, IsConsole, Departments,Email) {
            //debugger;
            var departmentIds = Departments.split(',');
            // set multiple departments
            //var departmentIds = []
            //$.each(Departments, function (i, e) {
            //    departmentIds.push(e.DepartmentId);
            //});
            FirstName = FirstName.replace("#$123$#","'");
            LastName = LastName.replace("#$123$#","'");
            $('#chosen-select').val(departmentIds);
            $('#chosen-select').multiselect("refresh");


            $('#txbExtensionId').val(ExtensionId);
            $('#txbExtension').val(Extension);
            $('#txbExtensionFirstName').val(FirstName);
            $('#txbExtensionLastName').val(LastName);
            $('#extensionEmail').val(Email);

            //$('#chkExtensionEnabled').prop('checked', false); //.bootstrapSwitch('state', Enabled);
            //$('#chkDashboardEnabled').prop('checked', false);//.bootstrapSwitch('state', Dashboard);

            $('#chkExtensionEnabled').bootstrapSwitch('state', Enabled);
            $('#chkDashboardEnabled').bootstrapSwitch('state', Dashboard);
            $('#chkConsoleEnabled').bootstrapSwitch('state', IsConsole);
            //var IsConsole = $('#chkConsoleEnabled').is(":checked");
            $('#divAddExtension').hide();
            $('#divUpdateExtension').show();
        }
        function UpdateExtension() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var ExtensionExists = 0;
            var Id = $('#txbExtensionId').val();
            var Extension = $('#txbExtension').val();
            var FirstName = $('#txbExtensionFirstName').val();
            var LastName = $('#txbExtensionLastName').val();
            var Enabled = $('#chkExtensionEnabled').is(":checked");
            var Dashboard = $('#chkDashboardEnabled').is(":checked");
            var Console = $('#chkConsoleEnabled').is(":checked");
            var email = $('#extensionEmail').val()

            var departmentIDs = $('#chosen-select').val();
            var SelectedDepartments = [];
            if (departmentIDs != null) {
                $.each(departmentIDs, function (i, e) {
                    SelectedDepartments.push({
                        DepartmentId: e,
                    });
                });
            }

            if (Extension == "") {
                ErrorText('Please provide Extension', ErrorDiv, ErrorLable);
                return;
            }
            //if (Console && !isEmail(email)) {
            //    ErrorText('Please provide valid email', ErrorDiv, ErrorLable);
            //    return;
            //}
            var Param = { "Id": Id, "Extension": Extension, "FirstName": FirstName, "LastName": LastName, "Enabled": Enabled, "IsDashboard": Dashboard, "IsConsole": Console, "Departments": SelectedDepartments, "Email": email };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Extensions.aspx/UpdateExtension",
                data: "{ExtensionsEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1_") > -1) {
                        //var ExtensionId = data.d.split('_')[1];
                        //var AccountId = data.d.split('_')[2];

                        //var Param = { "AccountId": AccountId, "EntityId": Id };
                        //SendMessageToWebSocket("UPDATE_Extension", Param);
                        CancelEditExtension();
                        GetExtensions();
                        $().toastmessage("showSuccessToast", "Extension updated sucessfully.");
                    }
                    else if (data.d.indexOf("2_") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while updating the extension.");
                    }
                    else if (data.d.indexOf("3_") > -1) {
                        $().toastmessage("showErrorToast", "Extension with same name already exists.");
                    }
                    else if (data.d.indexOf("4_") > -1) {
                        $().toastmessage("showErrorToast", "Extension not exist in Account numbering plan.");
                    }
                    
                }
            });
        }
        function CancelEditExtension() {

            $('#txbExtensionId').val("");
            $('#txbExtension').val("");
            $('#txbExtensionFirstName').val("");
            $('#txbExtensionLastName').val("");
            $('#extensionEmail').val("");
            $("#chosen-select").val('').trigger('chosen:updated')

            $('#chkExtensionEnabled').bootstrapSwitch('state', true);
            $('#chkDashboardEnabled').bootstrapSwitch('state', true);
            $('#chkConsoleEnabled').bootstrapSwitch('state', true);
            $('#ErrorDivSettings').hide();
            $('#divAddExtension').show();
            $('#divUpdateExtension').hide();
        }
        function showModalDeleteFromExtension(ExtensionId) {
            $('#ModalDeleteFromExtension').modal('show');
            $('#hidDeleteExtensionId').val(ExtensionId);
        }
        function DeleteFromExtension() {
            var ExtensionId = $('#hidDeleteExtensionId').val();
            var Param = { "ExtensionId": ExtensionId }
            //var ConfirmDelete = confirm("Are you sure you want to delete?");
            //if (ConfirmDelete == false) {
            //    return;
            //}
            $.ajax({
                type: "POST",
                url: "Extensions.aspx/DeleteExtensionOnId",
                data: JSON.stringify(Param),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d.indexOf("1_") > -1) {

                        //var AccountId = data.d.split('_')[2];

                        //var Param = { "AccountId": AccountId, "EntityId": ExtensionId };
                        //SendMessageToWebSocket("DELETE_Extension", Param);

                        CancelEditExtension();
                        GetExtensions();
                        $().toastmessage("showSuccessToast", "Extension deleted successfully.");
                    }
                    else {
                        $().toastmessage("showErrorToast", "Failed to delete Extension.");
                    }
                    $('#ModalDeleteFromExtension').modal('hide');
                    $('#hidDeleteExtensionId').val(null);
                }
            });
        }

        function AddContact() {          
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var ExtensionExists = 0;
            var Id = 0;
            var FirstName = $('#txbDirectoryFirstName').val().trim();
            var LastName = $('#txbDirectoryLastName').val().trim();
            var Company = $('#txbDirectoryCompany').val().trim();
            var PhoneWork = $('#txbDirectoryWork').val().trim();
            var PhoneHome = $('#txbDirectoryHome').val().trim();
            var PhoneMobile = $('#txbDirectoryMobile').val().trim();
            //chkConsoleEnabled
            if (FirstName == "" || LastName == "") {
                ErrorText('Please provide First and Last Name', ErrorDiv, ErrorLable);
                return;
            }
            if (PhoneWork == "" && PhoneHome == "" && PhoneMobile=="") {
                ErrorText('Please provide atleast one phone number', ErrorDiv, ErrorLable);
                return;
            }
            //if (IsConsole && !isEmail(email)) {
            //    ErrorText('Please provide valid email', ErrorDiv, ErrorLable);
            //    return;
            //}
            var Param = { "Id": Id, "FirstName": FirstName, "LastName": LastName, "Company": Company, "PhoneWork": PhoneWork, "PhoneHome": PhoneHome, "PhoneMobile": PhoneMobile };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Extensions.aspx/AddContact",
                data: "{ContactEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1_") > -1) {
                        $().toastmessage("showSuccessToast", "Contact added sucessfully.");

                        //var ExtensionId = data.d.split('_')[1];
                        //var AccountId = data.d.split('_')[2];

                        //var Param = { "AccountId": AccountId, "EntityId": ExtensionId };
                        //SendMessageToWebSocket("ADD_Extension", Param);

                        GetContacts();
                        CancelEditContact();
                    }
                    else if (data.d.indexOf("2_") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while adding the Contact.");
                    }
                    else if (data.d.indexOf("3_") > -1) {
                        $().toastmessage("showErrorToast", "Work Phone already exists.");
                    }
                    else if (data.d.indexOf("4_") > -1) {
                        $().toastmessage("showErrorToast", "Home Phone already exists.");
                    }
                    else if (data.d.indexOf("5_") > -1) {
                        $().toastmessage("showErrorToast", "Mobile Phone already exists.");
                    }
                }
            });
        }
        function ContactEdit(Id, FirstName, LastName, Company, PhoneWork, PhoneHome, PhoneMobile) {          
         
            $('#txbDirectoryId').val(Id);
            $('#txbDirectoryFirstName').val(FirstName);
            $('#txbDirectoryLastName').val(LastName);
            $('#txbDirectoryCompany').val(Company);
            $('#txbDirectoryWork').val(PhoneWork);
            $('#txbDirectoryHome').val(PhoneHome);
            $('#txbDirectoryMobile').val(PhoneMobile);

           
            $('#divAddDirectory').hide();
            $('#divUpdateDirectory').show();
        }
        function UpdateContact() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var ExtensionExists = 0;
            var Id = $('#txbDirectoryId').val();
            var FirstName = $('#txbDirectoryFirstName').val().trim();
            var LastName = $('#txbDirectoryLastName').val().trim();
            var Company = $('#txbDirectoryCompany').val().trim();
            var PhoneWork = $('#txbDirectoryWork').val().trim();
            var PhoneHome = $('#txbDirectoryHome').val().trim();
            var PhoneMobile = $('#txbDirectoryMobile').val().trim();
            //chkConsoleEnabled
            if (FirstName == "" || LastName == "") {
                ErrorText('Please provide First and Last Name', ErrorDiv, ErrorLable);
                return;
            }
            if (PhoneWork == "" && PhoneHome == "" && PhoneMobile == "") {
                ErrorText('Please provide atleast one phone number', ErrorDiv, ErrorLable);
                return;
            }          

            var Param = { "Id": Id, "FirstName": FirstName, "LastName": LastName, "Company": Company, "PhoneWork": PhoneWork, "PhoneHome": PhoneHome, "PhoneMobile": PhoneMobile };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Extensions.aspx/UpdateContact",
                data: "{ContactEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1_") > -1) {

                        CancelEditContact();
                        GetContacts();
                        $().toastmessage("showSuccessToast", "Contact updated sucessfully.");
                    }
                    else if (data.d.indexOf("2_") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while adding the Contact.");
                    }
                    else if (data.d.indexOf("3_") > -1) {
                        $().toastmessage("showErrorToast", "Work Phone already exists.");
                    }
                    else if (data.d.indexOf("4_") > -1) {
                        $().toastmessage("showErrorToast", "Home Phone already exists.");
                    }
                    else if (data.d.indexOf("5_") > -1) {
                        $().toastmessage("showErrorToast", "Mobile Phone already exists.");
                    }

                }
            });
        }
        function CancelEditContact() {

            $('#txbDirectoryId').val('');
            $('#txbDirectoryFirstName').val('');
            $('#txbDirectoryLastName').val('');
            $('#txbDirectoryCompany').val('');
            $('#txbDirectoryWork').val('');
            $('#txbDirectoryHome').val('');
            $('#txbDirectoryMobile').val('');


            $('#divAddDirectory').show();
            $('#divUpdateDirectory').hide();


            $('#ErrorDivSettings').hide();
        }

        function showModalDeleteFromContact(Id) {
            $('#ModalDeleteFromContact').modal('show');
            $('#hidDeleteContactId').val(Id);
        }
        function DeleteFromContact() {
          
            var ExtensionId = $('#hidDeleteContactId').val();
            var Param = { "Id": ExtensionId }
            //var ConfirmDelete = confirm("Are you sure you want to delete?");
            //if (ConfirmDelete == false) {
            //    return;
            //}
            $.ajax({
                type: "POST",
                url: "Extensions.aspx/DeleteContactOnId",
                data: JSON.stringify(Param),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d.indexOf("1_") > -1) {

                        //var AccountId = data.d.split('_')[2];

                        //var Param = { "AccountId": AccountId, "EntityId": ExtensionId };
                        //SendMessageToWebSocket("DELETE_Extension", Param);

                        GetContacts();
                        CancelEditContact();
                        $().toastmessage("showSuccessToast", "Contact deleted successfully.");
                    }
                    else {
                        $().toastmessage("showErrorToast", "Failed to delete Contact.");
                    }
                    $('#ModalDeleteFromContact').modal('hide');
                    $('#hidDeleteContactId').val(null);
                }
            });
        }

        //Area Codes
        function GetAreaCodes() {
            $('#tblAreaCodes').empty();
            $.ajax({
                type: "POST",
                url: "AreaCodes.aspx/GetAreaCodes",
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $('#tblAreaCodes').empty();
                    var trHTML = '<thead><tr><th>Area Code</th><th>Area Description</th><th>Edit</th><th>Delete</th></tr></thead><tbody></tbody>';
                    $('#tblAreaCodes').append(trHTML);
                    for (i = 0; i < data.d.length; i++) {

                        var trHTML = '';
                        trHTML += '<tr><td>' + data.d[i].AreaCode + '</td>';
                        trHTML += '<td>' + data.d[i].AreaDescription + '</td>';

                        trHTML += '<td><a class="edit"  onclick="AreaCodeEdit(\'' + data.d[i].Id + '\',\'' + data.d[i].AreaCode + '\',\'' + data.d[i].AreaDescription + '\')";>Edit</a></td>';
                        trHTML += '<td><a class="edit" style="padding: 0px;" onclick="showModalDeleteFromAreaCode(\'' + data.d[i].Id + '\')";>Delete</a></td></tr>';


                        $('#tblAreaCodes').append(trHTML);
                    }
                    $('#tblAreaCodes').dataTable({
                        "pagingType": "full_numbers",
                        destroy: true,
                        "bLengthChange": false,
                        "bPaginate": true,
                        "bFilter": false,
                        "aaSorting": [],
                        "pageLength": 4,
                        "info": false
                    });
                    $('#tblAreaCodes_paginate').parent().addClass("col-md-12").removeClass("col-md-7");
                }
            });
        }
        function AddAreaCode() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            //var ExtensionExists = 0;
            var Id = 0;
            var AreaCode = $('#txbAreaCode').val();
            var AreaDescription = $('#txbAreaDescription').val();

            if (AreaCode == "") {
                ErrorText('Please provide AreaCode', ErrorDiv, ErrorLable);
                return;
            }
            var Param = { "Id": Id, "AreaCode": AreaCode, "AreaDescription": AreaDescription };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "AreaCodes.aspx/AddAreaCode",
                data: "{AreaCodesEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1_") > -1) {
                        $().toastmessage("showSuccessToast", "Area Code added sucessfully.");

                        GetAreaCodes();
                        CancelEditAreaCode();
                    }
                    else if (data.d.indexOf("2_") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while adding the Area Code.");
                    }
                    else if (data.d.indexOf("3_") > -1) {
                        $().toastmessage("showErrorToast", "Area Code with Code name already exists.");
                    }
                }
            });
        }
        function AreaCodeEdit(AreaCodeId, AreaCode, AreaDescription) {
            $('#txbAreaCodeId').val(AreaCodeId);
            $('#txbAreaCode').val(AreaCode);
            $('#txbAreaDescription').val(AreaDescription);

            $('#divAddAreaCode').hide();
            $('#divUpdateAreaCode').show();
        }
        function UpdateAreaCode() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            //var ExtensionExists = 0;
            var Id = $('#txbAreaCodeId').val();
            var AreaCode = $('#txbAreaCode').val();
            var AreaDescription = $('#txbAreaDescription').val();

            if (AreaCode == "") {
                ErrorText('Please provide Area Code', ErrorDiv, ErrorLable);
                return;
            }
            var Param = { "Id": Id, "AreaCode": AreaCode, "AreaDescription": AreaDescription };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "AreaCodes.aspx/UpdateAreaCode",
                data: "{AreaCodesEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1_") > -1) {

                        GetAreaCodes();
                        $().toastmessage("showSuccessToast", "Area Code updated sucessfully.");
                    }
                    else if (data.d.indexOf("2_") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while updating the Area Code.");
                    }
                    else if (data.d.indexOf("3_") > -1) {
                        $().toastmessage("showErrorToast", "Area Code with same Code already exists.");
                    }
                }
            });
        }
        function CancelEditAreaCode() {

            $('#txbAreaCodeId').val("");
            $('#txbAreaCode').val("");
            $('#txbAreaDescription').val("");

            $('#ErrorDivSettings').hide();
            $('#divAddAreaCode').show();
            $('#divUpdateAreaCode').hide();
        }
        function showModalDeleteFromAreaCode(AreaCodeId) {
            $('#ModalDeleteFromAreaCode').modal('show');
            $('#hidDeleteAreaCodeId').val(AreaCodeId);
        }
        function DeleteFromAreaCode() {
            var AreaCodeId = $('#hidDeleteAreaCodeId').val();
            var Param = { "AreaCodeId": AreaCodeId }

            $.ajax({
                type: "POST",
                url: "AreaCodes.aspx/DeleteAreaCodeOnId",
                data: JSON.stringify(Param),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d.indexOf("1_") > -1) {

                        CancelEditAreaCode();
                        GetAreaCodes();
                        $().toastmessage("showSuccessToast", "Area Code deleted successfully.");
                    }
                    else {
                        $().toastmessage("showErrorToast", "Failed to delete Area Code.");
                    }
                    $('#ModalDeleteFromAreaCode').modal('hide');
                    $('#hidDeleteAreaCodeId').val(null);
                }
            });
        }
        //Prefrences
        function ShowPrefrences() {
            $(".rightmenu").hide();
            ClearSettingsModal();

            $("#SettingRightMenuPrefrences").show();
            $(".SettingsSpanActive").removeClass("SettingsSpanActive").addClass("SettingsSpanDeactive");
            $("#SettingLeftMenuPrefrences").removeClass("SettingsSpanDeactive").addClass("SettingsSpanActive");
            ShowSettingPrefrences();
        }
        function GetPrefrences() {

            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Settings.aspx/GetSettings",
                type: "POST",
                asynch: true,
                success: function (data) {
                    $("#txbPBXIP").val(data.d.PBXIP);
                    $("#txbPrefrencesWorkingHours").val(data.d.AgentWorkingHours);
                    $("#txbPrefrencesHangupThreshold").val(data.d.AgentHangUpThreshold);
                    $("#txbPrefrencesInternalLength").val(data.d.InternalLength);
                    $("#txbPrefrencesRingTimeThreshold").val(data.d.RingTimeThreshold);
                    $("#lstPrefrencesCurrency").val(data.d.Currency);
                    $("#txbAgentAvalibalityHours").val(data.d.AgentAvalibalityHours);
                    $("#txbAgentCallsAnsweredWithInNSec").val(data.d.AgentCallsAnsweredWithInNSec);
                    $("#txbQCallsAnsweredWithInNSec").val(data.d.QCallsAnsweredWithInNSec);

                    $("#txbAgentAvalibalityHoursScore").val(data.d.AgentAvaiabilityScore);
                    $("#txbAgentCallsAnsweredWithInNSecScore").val(data.d.AgentCallAnsweredInNSecScore);
                    $("#txbAgentCallsAnsweredScore").val(data.d.AgentCallsAnsweredScore);
                    $("#txbQCallsAnsweredWithInNSecScore").val(data.d.QCallAnsweredInNSecScore);
                    $("#txbQCallsWaitedWithInNSec").val(data.d.QWaitingTimeInNSec);
                    $("#txbQCallsWaitedWithInNSecScore").val(data.d.QWaitingTimeScore);
                    $("#txbQCallsAnsweredScore").val(data.d.QCallsAnsweredScore);



                    if (data.d.Currency == "Euro") {
                        $("#lblCostPerSecond").append("Cost Per Second ()");
                        $("#lblConnectionCost").append("Connection Cost ()");
                        $("#lblCallSetupCost").append("Call Setup Cost ()");
                        $("#lblRecordingPerMinute").append("Recording Per Minute ()");
                        $("#lblStoragePerMinute").append("Storage Per Minute ()");
                    }
                    else if (data.d.Currency == "Pound") {
                        $("#lblCostPerSecond").append("Cost Per Second ()");
                        $("#lblConnectionCost").append("Connection Cost ()");
                        $("#lblCallSetupCost").append("Call Setup Cost ()");
                        $("#lblRecordingPerMinute").append("Recording Per Minute ()");
                        $("#lblStoragePerMinute").append("Storage Per Minute ()");
                    }
                    else if (data.d.Currency == "Dollar") {
                        $("#lblCostPerSecond").append("Cost Per Second ($)");
                        $("#lblConnectionCost").append("Connection Cost ($)");
                        $("#lblCallSetupCost").append("Call Setup Cost ($)");
                        $("#lblRecordingPerMinute").append("Recording Per Minute ($)");
                        $("#lblStoragePerMinute").append("Storage Per Minute ($)");
                    }




                }
            });
        }
        function GetCurrency() {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Settings.aspx/GetSettings",
                type: "POST",
                asynch: true,
                success: function (data) {

                    $("#lblCostPerSecond").text('');
                    $("#lblConnectionCost").text('');
                    $("#lblCallSetupCost").text('');
                    $("#lblRecordingPerMinute").text('');
                    $("#lblStoragePerMinute").text('');

                    if (data.d.Currency == "Euro") {
                        $("#lblCostPerSecond").append("Cost Per Second ()");
                        $("#lblConnectionCost").append("Connection Cost ()");
                        $("#lblCallSetupCost").append("Call Setup Cost ()");
                        $("#lblRecordingPerMinute").append("Recording Per Minute ()");
                        $("#lblStoragePerMinute").append("Storage Per Minute ()");
                    }
                    else if (data.d.Currency == "Pound") {
                        $("#lblCostPerSecond").append("Cost Per Second ()");
                        $("#lblConnectionCost").append("Connection Cost ()");
                        $("#lblCallSetupCost").append("Call Setup Cost ()");
                        $("#lblRecordingPerMinute").append("Recording Per Minute ()");
                        $("#lblStoragePerMinute").append("Storage Per Minute ()");
                    }
                    else if (data.d.Currency == "Dollar") {
                        $("#lblCostPerSecond").append("Cost Per Second ($)");
                        $("#lblConnectionCost").append("Connection Cost ($)");
                        $("#lblCallSetupCost").append("Call Setup Cost ($)");
                        $("#lblRecordingPerMinute").append("Recording Per Minute ($)");
                        $("#lblStoragePerMinute").append("Storage Per Minute ($)");
                    }
                }
            });
        }
        function UpdatePrefrences() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var PBXIP = $("#txbPBXIP").val();
            var AgentWorkingHours = $("#txbPrefrencesWorkingHours").val();
            var AgentHangUpThreshold = $("#txbPrefrencesHangupThreshold").val();
            var InternalLength = $("#txbPrefrencesInternalLength").val();
            var RingTimeThreshold = $("#txbPrefrencesRingTimeThreshold").val();
            //var AgentAvalibalityHours = $("#txbAgentAvalibalityHours").val();
            //var AgentCallsAnsweredWithInNSec = $("#txbAgentCallsAnsweredWithInNSec").val();
            //var QCallsAnsweredWithInNSec = $("#txbQCallsAnsweredWithInNSec").val();

            //var AgentAvaiabilityScore = $("#txbAgentAvalibalityHoursScore").val();
            //var AgentCallAnsweredInNSecScore = $("#txbAgentCallsAnsweredWithInNSecScore").val();
            //var AgentCallsAnsweredScore = $("#txbAgentCallsAnsweredScore").val();
            //var QCallAnsweredInNSecScore = $("#txbQCallsAnsweredWithInNSecScore").val();
            //var QWaitingTimeInNSec = $("#txbQCallsWaitedWithInNSec").val();
            //var QWaitingTimeScore = $("#txbQCallsWaitedWithInNSecScore").val();
            //var QCallsAnsweredScore = $("#txbQCallsAnsweredScore").val();

            var Currency = $("#lstPrefrencesCurrency").val();
            var Currency = "Pound";
            var DiskCostPerMin = $("#txbDiskCostPerMB").val();
            var DurationCostPerMin = $("#txbDurationCostPerMinute").val();
            if (!isValidIpv4Addr(PBXIP)) {
                ErrorText('Please provide a valid PBXIP.', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(AgentWorkingHours) || !(Math.floor(AgentWorkingHours) == AgentWorkingHours)) {
                ErrorText('Please provide numeric value for Working Hours', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(AgentHangUpThreshold) || !(Math.floor(AgentHangUpThreshold) == AgentHangUpThreshold)) {
                ErrorText('Please provide numeric value for Hangup Threshold', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(InternalLength) || !(Math.floor(InternalLength) == InternalLength)) {
                ErrorText('Please provide numeric value for Internal Length', ErrorDiv, ErrorLable);
                return;
            }

            if (!$.isNumeric(RingTimeThreshold) || !(Math.floor(RingTimeThreshold) == RingTimeThreshold)) {
                ErrorText('Please provide numeric value for Ring Time Threshold', ErrorDiv, ErrorLable);
                return;
            }
            //if (!$.isNumeric(QCallsAnsweredScore) || !(Math.floor(QCallsAnsweredScore) == QCallsAnsweredScore)) {
            //    ErrorText('Please provide numeric value for Supervisor Total Answered Score', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(QWaitingTimeScore) || !(Math.floor(QWaitingTimeScore) == QWaitingTimeScore)) {
            //    ErrorText('Please provide numeric value for Supervisor Waiting time Score', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(QWaitingTimeInNSec) || !(Math.floor(QWaitingTimeInNSec) == QWaitingTimeInNSec)) {
            //    ErrorText('Please provide numeric value for Supervisor Waiting time', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(QCallAnsweredInNSecScore) || !(Math.floor(QCallAnsweredInNSecScore) == QCallAnsweredInNSecScore)) {
            //    ErrorText('Please provide numeric value for Supervisor Answered Within Score', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(AgentCallsAnsweredScore) || !(Math.floor(AgentCallsAnsweredScore) == AgentCallsAnsweredScore)) {
            //    ErrorText('Please provide numeric value for Agent Total Answered Score', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(AgentCallAnsweredInNSecScore) || !(Math.floor(AgentCallAnsweredInNSecScore) == AgentCallAnsweredInNSecScore)) {
            //    ErrorText('Please provide numeric value for Agent Answered Within Score', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(AgentAvaiabilityScore) || !(Math.floor(AgentAvaiabilityScore) == AgentAvaiabilityScore)) {
            //    ErrorText('Please provide numeric value for Agent Availability Score', ErrorDiv, ErrorLable);
            //    return;
            //}




            var Param = {
                "PBXIP": PBXIP, "AgentWorkingHours": AgentWorkingHours, "AgentHangUpThreshold": AgentHangUpThreshold, "InternalLength": InternalLength
                , "RingTimeThreshold": RingTimeThreshold, "Currency": Currency
               
            };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "settings.aspx/UpdatePrefrences",
                data: "{SettingsUpdatedInfo:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {
                    ErrorDiv.hide();
                    $().toastmessage("showSuccessToast", "Settings updated successfully.</span>");
                }
            });

        }



        function UpdateReportOptions() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            //var PBXIP = $("#txbPBXIP").val();
            //var AgentWorkingHours = $("#txbPrefrencesWorkingHours").val();
            //var AgentHangUpThreshold = $("#txbPrefrencesHangupThreshold").val();
            //var InternalLength = $("#txbPrefrencesInternalLength").val();
            /*var RingTimeThreshold = $("#txbPrefrencesRingTimeThreshold").val();*/
            var AgentAvalibalityHours = $("#txbAgentAvalibalityHours").val();
            var AgentCallsAnsweredWithInNSec = $("#txbAgentCallsAnsweredWithInNSec").val();
            var QCallsAnsweredWithInNSec = $("#txbQCallsAnsweredWithInNSec").val();

            var AgentAvaiabilityScore = $("#txbAgentAvalibalityHoursScore").val();
            var AgentCallAnsweredInNSecScore = $("#txbAgentCallsAnsweredWithInNSecScore").val();
            var AgentCallsAnsweredScore = $("#txbAgentCallsAnsweredScore").val();
            var QCallAnsweredInNSecScore = $("#txbQCallsAnsweredWithInNSecScore").val();
            var QWaitingTimeInNSec = $("#txbQCallsWaitedWithInNSec").val();
            var QWaitingTimeScore = $("#txbQCallsWaitedWithInNSecScore").val();
            var QCallsAnsweredScore = $("#txbQCallsAnsweredScore").val();

            //var Currency = $("#lstPrefrencesCurrency").val();
            //var Currency = "Pound";
            //var DiskCostPerMin = $("#txbDiskCostPerMB").val();
            //var DurationCostPerMin = $("#txbDurationCostPerMinute").val();
            //if (!isValidIpv4Addr(PBXIP)) {
            //    ErrorText('Please provide a valid PBXIP.', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(AgentWorkingHours) || !(Math.floor(AgentWorkingHours) == AgentWorkingHours)) {
            //    ErrorText('Please provide numeric value for Working Hours', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(AgentHangUpThreshold) || !(Math.floor(AgentHangUpThreshold) == AgentHangUpThreshold)) {
            //    ErrorText('Please provide numeric value for Hangup Threshold', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(InternalLength) || !(Math.floor(InternalLength) == InternalLength)) {
            //    ErrorText('Please provide numeric value for Internal Length', ErrorDiv, ErrorLable);
            //    return;
            //}
            //if (!$.isNumeric(RingTimeThreshold) || !(Math.floor(RingTimeThreshold) == RingTimeThreshold)) {
            //    ErrorText('Please provide numeric value for Ring Time Threshold', ErrorDiv, ErrorLable);
            //    return;
            //}
            if (!$.isNumeric(QCallsAnsweredScore) || !(Math.floor(QCallsAnsweredScore) == QCallsAnsweredScore)) {
                ErrorText('Please provide numeric value for Supervisor Total Answered Score', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(QWaitingTimeScore) || !(Math.floor(QWaitingTimeScore) == QWaitingTimeScore)) {
                ErrorText('Please provide numeric value for Supervisor Waiting time Score', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(QWaitingTimeInNSec) || !(Math.floor(QWaitingTimeInNSec) == QWaitingTimeInNSec)) {
                ErrorText('Please provide numeric value for Supervisor Waiting time', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(QCallAnsweredInNSecScore) || !(Math.floor(QCallAnsweredInNSecScore) == QCallAnsweredInNSecScore)) {
                ErrorText('Please provide numeric value for Supervisor Answered Within Score', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(AgentCallsAnsweredScore) || !(Math.floor(AgentCallsAnsweredScore) == AgentCallsAnsweredScore)) {
                ErrorText('Please provide numeric value for Agent Total Answered Score', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(AgentCallAnsweredInNSecScore) || !(Math.floor(AgentCallAnsweredInNSecScore) == AgentCallAnsweredInNSecScore)) {
                ErrorText('Please provide numeric value for Agent Answered Within Score', ErrorDiv, ErrorLable);
                return;
            }
            if (!$.isNumeric(AgentAvaiabilityScore) || !(Math.floor(AgentAvaiabilityScore) == AgentAvaiabilityScore)) {
                ErrorText('Please provide numeric value for Agent Availability Score', ErrorDiv, ErrorLable);
                return;
            }




            var Param = {  "AgentAvalibalityHours": AgentAvalibalityHours, "AgentCallsAnsweredWithInNSec": AgentCallsAnsweredWithInNSec, "QCallsAnsweredWithInNSec": QCallsAnsweredWithInNSec, "AgentAvaiabilityScore": AgentAvaiabilityScore, "AgentCallAnsweredInNSecScore": AgentCallAnsweredInNSecScore, "AgentCallsAnsweredScore": AgentCallsAnsweredScore, "QCallAnsweredInNSecScore": QCallAnsweredInNSecScore, "QWaitingTimeInNSec": QWaitingTimeInNSec, "QWaitingTimeScore": QWaitingTimeScore, "QCallsAnsweredScore": QCallsAnsweredScore };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "settings.aspx/UpdateReportOptions",
                data: "{SettingsUpdatedInfo:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {
                    ErrorDiv.hide();
                    $().toastmessage("showSuccessToast", "Settings updated successfully.</span>");
                }
            });

        }







        function isValidIpv4Addr(ip) {
            return /^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(ip);
        }
        //User
        function ShowUsers() {
            $(".rightmenu").hide();
            ClearSettingsModal();

            $("#SettingRightMenuUsers").show();
            $(".SettingsSpanActive").removeClass("SettingsSpanActive").addClass("SettingsSpanDeactive");
            $("#SettingLeftMenuUsers").removeClass("SettingsSpanDeactive").addClass("SettingsSpanActive");
            ShowSettingUsers();
        }
        function Permissionlist() {

            $('#ddlModule').multiselect({
                includeSelectAllOption: true,
                selectAllValue: 'multiselect-all',
                enableCaseInsensitiveFiltering: true,
                enableFiltering: true,
                maxHeight: '300',
                onSelectAll: function () {
                    $.uniform.update();
                },

            });
            $("#ddlModule").multiselect('updateButtonText');
            //$("#ddlModule option:selected").removeAttr("selected");
            $('#ddlModule').multiselect('refresh');


        }
        function GetUsers() {
            $('#tblUsers').empty();
            $.ajax({
                type: "POST",
                url: "Users.aspx/GetAllUsers",
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var trHTML = '<thead><tr><th>Display Name</th><th>User Name</th><th>Email Address</th><th>Edit</th><th>Delete</th></tr></thead><tbody></tbody>';
                    $('#tblUsers').append(trHTML);
                    for (var i = 0; i < data.d.length; i++) {
                        var trHTML = '';
                        trHTML += '<tr><td>' + data.d[i].DisplayName + '</td>';
                        trHTML += '<td>' + data.d[i].UserName + '</td>';
                        trHTML += '<td>' + data.d[i].EmailAddress + '</td>';
                        trHTML += "<td><a class='edit'  onclick='UserEditInfo(" + data.d[i].UserId + ")';>Edit</a></td>";
                        trHTML += "<td><a onclick='showModalDeleteUser(" + data.d[i].UserId + ")';> Delete</a></td></tr>";
                        $('#tblUsers').append(trHTML);
                    }
                    $("#tblUsers").show();
                    $('#tblUsers').dataTable({
                        "pagingType": "full_numbers",
                        destroy: true,
                        "bLengthChange": false,
                        "bPaginate": true,
                        "bFilter": false,
                        "aaSorting": [],
                        "pageLength": 4,
                        "info": false
                    });
                    $('#tblUsers_paginate').parent().addClass("col-md-12").removeClass("col-md-7");
                }
            });
        }
        function UserEditInfo(UserId) {
            //$("#ModalHeader").text("Edit User");
            $("#ddlModule option:selected").removeAttr("selected");
            var Param = { "UserId": UserId };
            $.ajax({

                type: "POST",
                url: "Users.aspx/GetUserOnId",
                data: JSON.stringify(Param),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var PermissionsArray = new Array();
                    if (data.d.Permissions == null) {

                    }
                    else {
                        for (var i = 0; i < data.d.Permissions.length; i++) {
                            PermissionsArray[i] = data.d.Permissions[i];
                        }
                    }
                    $('#txbUserId').val(UserId);
                    $('#txbDisplayName').val(data.d.DisplayName);
                    $('#txbUserName').val(data.d.UserName);
                    $('#txbPassword').val(data.d.Password);
                    $('#txbEmail').val(data.d.EmailAddress);
                    //$('#txbUserName').attr("disabled", true)
                    $('#cbEnableUser').bootstrapSwitch('state', data.d.Enable);
                    $("#ddlModule").val(PermissionsArray);
                    $("#ddlModule").multiselect("refresh");
                    $('#divAddUser').hide();
                    $('#divUpdateUser').show();


                }
            });
        }
        function AddUsers() {

            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var UserId = 0;
            var UserName = $('#txbUserName').val();
            var Password = $('#txbPassword').val();
            var DisplayName = $('#txbDisplayName').val();
            var EmailAddress = $('#txbEmail').val();
            var Enable = false;
            if ($('#cbEnableUser').is(':checked')) {
                Enable = true;
            }
            else {
                Enable = false;
            }

            var UserPermissions = new Array();
            //var permissions = $('#ddlModule option');
            // give all permissions 
            var permissions = $('#ddlModule option:selected');
            $(permissions).each(function (index, permissions) {

                UserPermissions.push($(this).val());
            });

            if (UserName == "") {
                ErrorText('Please provide User Name', ErrorDiv, ErrorLable);
                return;
            }
            if (Password == "") {
                ErrorText('Please provide Password', ErrorDiv, ErrorLable);
                return;
            }
            if (DisplayName == "") {
                ErrorText('Please provide Display Name', ErrorDiv, ErrorLable);
                return;
            }
            if (EmailAddress == "") {
                ErrorText('Please provide Email Address', ErrorDiv, ErrorLable);
                return;
            }

            var userType = $("input[type='radio']:checked").val();
            var Param = { "UserId": UserId, "UserName": UserName, "DisplayName": DisplayName, "EmailAddress": EmailAddress, "Password": Password, "Enable": Enable, "Permissions": UserPermissions };
            $.ajax({
                type: "POST",
                url: "Users.aspx/InsertIntoUsers",
                data: "{UsersEntityObj:" + JSON.stringify(Param) + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d === "success") {

                        $().toastmessage("showSuccessToast", "User added sucessfully.");
                        CancelEditUser();
                        GetUsers();
                    }
                    else {
                        $().toastmessage("showErrorToast", data.d);
                    }
                }
            });
        }
        function UpdateUsers() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var UserId = $('#txbUserId').val();
            var UserName = $('#txbUserName').val();
            var Password = $('#txbPassword').val();
            var DisplayName = $('#txbDisplayName').val();
            var EmailAddress = $('#txbEmail').val();
            var Enable = false;
            if ($('#cbEnableUser').is(':checked')) {
                Enable = true;
            }
            else {
                Enable = false;
            }

            var UserPermissions = new Array();
            var permissions = $('#ddlModule option:selected');
            $(permissions).each(function (index, permissions) {
                UserPermissions.push($(this).val());
            });

            if (UserName == "") {
                ErrorText('Please provide User Name', ErrorDiv, ErrorLable);
                return;
            }
            if (Password == "") {
                ErrorText('Please provide Password', ErrorDiv, ErrorLable);
                return;
            }
            if (DisplayName == "") {
                ErrorText('Please provide Display Name', ErrorDiv, ErrorLable);
                return;
            }
            if (EmailAddress == "") {
                ErrorText('Please provide Email Address', ErrorDiv, ErrorLable);
                return;
            }
            var Param = { "UserId": UserId, "UserName": UserName, "DisplayName": DisplayName, "EmailAddress": EmailAddress, "Password": Password, "Enable": Enable, "Permissions": UserPermissions };
            $.ajax({
                type: "POST",
                url: "Users.aspx/UpdateIntoUsers",
                data: "{UsersEntityObj:" + JSON.stringify(Param) + "}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d === "success") {

                        $().toastmessage("showSuccessToast", "User updated sucessfully.");
                        GetUsers();
                        CancelEditUser();
                    }
                    else {
                        $().toastmessage("showErrorToast", data.d);
                    }
                }
            });
        }
        function CancelEditUser() {
            $('#txbUserName').val("");
            $('#txbPassword').val("");
            $('#txbDisplayName').val("");
            $('#txbEmail').val("");
            $('#cbEnableUser').bootstrapSwitch('state', false);
            $("#ddlModule option:selected").removeAttr("selected");
            $("#ddlModule").multiselect("refresh");
            $.uniform.update();
            $('#ErrorDivSettings').hide();
            $('#divAddUser').show();
            $('#divUpdateUser').hide();
        }
        function showModalDeleteUser(UserId) {
            $('#ModalDeleteUser').modal('show');
            $('#hidDeleteUserId').val(UserId);
        }
        function DeleteUser() {
            var UserId = $('#hidDeleteUserId').val();
            var Param = { "UserId": UserId }
            //var ConfirmDelete = confirm("Are you sure you want to delete?");
            //if (ConfirmDelete == false) {
            //    return;
            //}
            $.ajax({
                type: "POST",
                url: "Users.aspx/DeleteFromUsers",
                data: JSON.stringify(Param),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d === true) {
                        GetUsers();
                        //ClearUserModal();
                        $().toastmessage("showSuccessToast", "User deleted successfully.");
                    }
                    else {
                        $().toastmessage("showErrorToast", "Failed to delete user.");
                    }
                    $('#ModalDeleteUser').modal('hide');
                    $('#hidDeleteUserId').val(null);
                }
            });
        }
        //External Routing
        function ShowExternalRouting() {
            $(".rightmenu").hide();
            ClearSettingsModal();

            $("#SettingRightMenuExternalRouting").show();
            $(".SettingsSpanActive").removeClass("SettingsSpanActive").addClass("SettingsSpanDeactive");
            $("#SettingLeftMenuExternalRouting").removeClass("SettingsSpanDeactive").addClass("SettingsSpanActive");
            ShowSettingExternalRouting();
        }
        function GetExternalRouting() {
            $('#tblExternalRouting').empty();
            $.ajax({
                type: "POST",
                url: "ExternalRouting.aspx/GetExternalRouting",
                data: {},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    $('#tblExternalRouting').empty();
                    var trHTML = '<thead><tr><th>Name</th><th>Number</th><th>Enabled</th><th>Edit</th><th>Delete</th></tr></thead><tbody></tbody>';
                    $('#tblExternalRouting').append(trHTML);
                    for (i = 0; i < data.d.length; i++) {

                        var trHTML = '';
                        trHTML += '<tr><td>' + data.d[i].Name + '</td>';
                        trHTML += '<td>' + data.d[i].Number + '</td>';
                        var Enabled = "";
                        if (data.d[i].Enabled) {
                            Enabled = "Yes";
                        }
                        else {
                            Enabled = "No";
                        }
                        trHTML += '<td>' + Enabled + '</td>';
                        trHTML += '<td><a class="edit"  onclick="ExternalRoutingEdit(\'' + data.d[i].Id + '\',\'' + data.d[i].Name + '\',\'' + data.d[i].Number + '\',' + data.d[i].Enabled + ')";>Edit</a></td>';
                        trHTML += '<td><a class="edit" style="padding: 0px;" onclick="showModalDeleteFromExternalRouting(\'' + data.d[i].Id + '\')";>Delete</a></td></tr>';

                        $('#tblExternalRouting').append(trHTML);
                    }
                    $('#tblExternalRouting').dataTable({
                        "pagingType": "full_numbers",
                        destroy: true,
                        "bLengthChange": false,
                        "bPaginate": true,
                        "bFilter": false,
                        "aaSorting": [],
                        "pageLength": 4,
                        "info": false
                    });
                    $('#tblExternalRouting_paginate').parent().addClass("col-md-12").removeClass("col-md-7");
                }
            });
        }
        function AddExternalRouting() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var Id = 0;
            var Name = $('#txbExternalRoutingName').val();
            var Number = $('#txbExternalRoutingNumber').val();
            var Enabled = $('#chkExternalRoutingEnabled').is(":checked");
            if (Name == "") {
                ErrorText('Please provide Name', ErrorDiv, ErrorLable);
                return;
            }
            if (Number == "") {
                ErrorText('Please provide Number', ErrorDiv, ErrorLable);
                return;
            }
            var Param = { "Id": Id, "Name": Name, "Number": Number, "Enabled": Enabled };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "ExternalRouting.aspx/AddExternalRouting",
                data: "{ExternalRoutingEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1:") > -1) {
                        $().toastmessage("showSuccessToast", "External Routing added sucessfully.");
                        GetExternalRouting();
                        CancelEditExternalRouting();
                    }
                    else if (data.d.indexOf("2:") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while adding the External Routing.");
                    }
                    else if (data.d.indexOf("3:") > -1) {
                        $().toastmessage("showErrorToast", "External Routing with same name already exists.");
                    }
                }
            });
        }
        function ExternalRoutingEdit(ExternalRoutingId, Name, Number, Enabled) {
            $('#txbExternalRoutingId').val(ExternalRoutingId);
            $('#txbExternalRoutingName').val(Name);
            $('#txbExternalRoutingNumber').val(Number);
            $('#chkExternalRoutingEnabled').bootstrapSwitch('state', Enabled);
            $('#divAddExternalRouting').hide();
            $('#divUpdateExternalRouting').show();
        }
        function UpdateExternalRouting() {
            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var Id = $('#txbExternalRoutingId').val();
            var Name = $('#txbExternalRoutingName').val();
            var Number = $('#txbExternalRoutingNumber').val();
            var Enabled = $('#chkExternalRoutingEnabled').is(":checked");
            if (Name == "") {
                ErrorText('Please provide Name', ErrorDiv, ErrorLable);
                return;
            }
            var Param = { "Id": Id, "Name": Name, "Number": Number, "Enabled": Enabled };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "ExternalRouting.aspx/UpdateExternalRouting",
                data: "{ExternalRoutingEntityObj:" + JSON.stringify(Param) + "}",
                type: "POST",
                success: function (data) {

                    if (data.d.indexOf("1:") > -1) {
                        GetExternalRouting();
                        $().toastmessage("showSuccessToast", "External Routing updated sucessfully.");
                    }
                    else if (data.d.indexOf("2:") > -1) {
                        $().toastmessage("showErrorToast", "An error occured while updating the External Routing.");
                    }
                    else if (data.d.indexOf("3:") > -1) {
                        $().toastmessage("showErrorToast", "External Routing with same name already exists.");
                    }
                }
            });
        }
        function CancelEditExternalRouting() {

            $('#txbExternalRoutingId').val("");
            $('#txbExternalRoutingName').val("");
            $('#txbExternalRoutingNumber').val("");
            $('#chkExternalRoutingEnabled').bootstrapSwitch('state', true);
            $('#ErrorDivSettings').hide();
            $('#divAddExternalRouting').show();
            $('#divUpdateExternalRouting').hide();
        }
        function showModalDeleteFromExternalRouting(ExternalRoutingId) {
            $('#ModalDeleteFromExternalRouting').modal('show');
            $('#hidExternalRoutingId').val(ExternalRoutingId);
        }
        function DeleteFromExternalRouting() {
            var ExternalRoutingId = $('#hidExternalRoutingId').val();
            var Param = { "ExternalRoutingId": ExternalRoutingId }
            //var ConfirmDelete = confirm("Are you sure you want to delete?");
            //if (ConfirmDelete == false) {
            //    return;
            //}
            $.ajax({
                type: "POST",
                url: "ExternalRouting.aspx/DeleteExternalRoutingOnId",
                data: JSON.stringify(Param),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    if (data.d.indexOf("1:") > -1) {
                        CancelEditExternalRouting();
                        GetExternalRouting();
                        $().toastmessage("showSuccessToast", "External Routing deleted successfully.");
                    }
                    else {
                        $().toastmessage("showErrorToast", "Failed to delete External Routing.");
                    }
                    $('#ModalDeleteFromExternalRouting').modal('hide');
                    $('#hidExternalRoutingId').val(null);
                }
            });
        }
        //SMTP
        function SaveSMTPSettings() {
            var SMTPHost = $("#txbSMTPHost").val();
            var SMTPPort = $("#txbSMTPort").val();
            var SMTPUserName = $("#txbSMTUserName").val();
            var SMTPPassword = $("#txbSMTPassword").val();
            var EnableSSL = false;

            if ($('#chkEnableSSL').is(':checked')) {
                EnableSSL = true;
            }
            else {
                EnableSSL = false;
            }
            if (ValidateSMTPSettings()) {
                var Param = { "SMTPHost": SMTPHost, "SMTPPort": SMTPPort, "SMTPUserName": SMTPUserName, "SMTPPassword": SMTPPassword, "EnableSSL": EnableSSL };
                $.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    url: "settings.aspx/SaveSMTPSettings",
                    data: JSON.stringify(Param),
                    type: "POST",
                    success: function (data) {
                        if (data.d == "1")
                            $().toastmessage("showSuccessToast", "SMTP Settings updated sucessfully.");
                        else if (data.d == "0")
                            $().toastmessage("showErrorToast", "Failed to update SMTP Settings.");
                    }
                });
            }

        }
        function TestEmail() {

            if (ValidateSMTPSettings()) {

                $('#ModalTestEmail').modal('show');

            }

        }
        function SendTestEmail() {
            ErrorDiv = $("#ErrorDivTestEmail");
            ErrorLable = $("#lblErrorTestEmail");
            var TestEmail = $("#txbTestEmail").val();

            if (TestEmail == "") {
                ErrorText('Please provide Email.', ErrorDiv, ErrorLable);
                return false;
            }
            if (!isEmail(TestEmail)) {
                ErrorText('Please provide a valid Email.', ErrorDiv, ErrorLable);
                return false;
            }

            ErrorDiv.hide();
            ErrorLable.text("");

            var SMTPHost = $("#txbSMTPHost").val();
            var SMTPPort = $("#txbSMTPort").val();
            var SMTPUserName = $("#txbSMTUserName").val();
            var SMTPPassword = $("#txbSMTPassword").val();
            var EnableSSL = false;

            if ($('#chkEnableSSL').is(':checked')) {
                EnableSSL = true;
            }
            else {
                EnableSSL = false;
            }

            var Param = { "TestEmail": TestEmail, "SMTPHost": SMTPHost, "SMTPPort": SMTPPort, "SMTPUserName": SMTPUserName, "SMTPPassword": SMTPPassword, "EnableSSL": EnableSSL };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "settings.aspx/TestSMTPSettings",
                data: JSON.stringify(Param),
                type: "POST",
                success: function (data) {
                    if (data.d == "1") {
                        $().toastmessage("showSuccessToast", "SMTP Settings Test Successfull.");
                        $('#ModalTestEmail').modal('hide');
                    }
                    else if (data.d == "0") {
                        $().toastmessage("showErrorToast", "Failed to Test SMTP Settings.");
                    }
                }
            });
        }
        function isEmail(email) {
            var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return regex.test(email);
        }
        function ValidateSMTPSettings() {

            ErrorDiv = $("#ErrorDivSettings");
            ErrorLable = $("#lblErrorSettings");
            var SMTPHost = $("#txbSMTPHost").val();
            var SMTPPort = $("#txbSMTPort").val();
            var SMTPUserName = $("#txbSMTUserName").val();
            var SMTPPassword = $("#txbSMTPassword").val();

            if (SMTPHost == "") {
                ErrorText('Please provide a Host Name.', ErrorDiv, ErrorLable);
                return false;
            }
            if (SMTPPort == "") {
                ErrorText('Please provide a Port Number.', ErrorDiv, ErrorLable);
                return false;
            }
            if (SMTPUserName == "") {
                ErrorText('Please provide User Name.', ErrorDiv, ErrorLable);
                return false;
            }
            if (!isEmail(SMTPUserName)) {
                ErrorText('Please provide a valid User Name.', ErrorDiv, ErrorLable);
                return false;
            }
            if (SMTPPassword == "") {
                ErrorText('Please provide Password.', ErrorDiv, ErrorLable);
                return false;
            }
            return true;
        }
        function GetSMTPSettings() {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Settings.aspx/GetSettings",
                type: "POST",
                asynch: true,
                success: function (data) {
                    $("#txbSMTPHost").val(data.d.SMTPHost);
                    $("#txbSMTPort").val(data.d.SMTPPort);
                    $("#txbSMTUserName").val(data.d.SMTPUserName);
                    $("#txbSMTPassword").val(data.d.SMTPPassword);
                    if (data.d.EnableSSL == 1) {
                        $('#chkEnableSSL').bootstrapSwitch('state', true);
                    }
                    else {
                        $('#chkEnableSSL').bootstrapSwitch('state', false);
                    }
                }
            });
        }

        //CompanyInfo
        function SaveCompanyInfoSettings() {
            var CompanyName = $("#txbCompanyName").val();
            var CompanyAddress = $("#txbCompanyAddress").val();
            var CompanyLogo = $('#CompanyLogo > img').attr('src');

            //var img = document.getElementById('AgentDefaultImage');
            var img = document.getElementById('CompanyLogo').firstChild;
            var width = img.naturalWidth;
            var height = img.naturalHeight;

            if (width < 100 || height < 100) {
                $('#ErrorDivSettings').show();
                $('#lblErrorSettings').text('Image size is less than 100 * 100. Your Image Size: ' + width + " * " + height);
                return;
            }

            $('#ErrorDivSettings').hide();
            $('#lblErrorSettings').text('');

            var Param = { "CompanyName": CompanyName, "CompanyAddress": CompanyAddress, "CompanyLogo": CompanyLogo };
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "settings.aspx/SaveCompanyInfoSettings",
                data: JSON.stringify(Param),
                type: "POST",
                success: function (data) {
                    if (data.d == "1")
                        $().toastmessage("showSuccessToast", "Company Info Settings updated sucessfully.");
                    else if (data.d == "0")
                        $().toastmessage("showErrorToast", "Failed to update Company Info Settings.");
                }
            });
        }

        function GetCompanyInfoSettings() {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                url: "Settings.aspx/GetSettings",
                type: "POST",
                asynch: true,
                success: function (data) {
                    $("#txbCompanyName").val(data.d.CompanyName);
                    $("#txbCompanyAddress").val(data.d.CompanyAddress);

                    $('#CompanyLogo').empty();
                    $CompanyLogo = $("<img/>");
                    $CompanyLogo.attr("id", "DefaultImage");
                    $CompanyLogo.attr({ "src": data.d.CompanyLogo });
                    $CompanyLogo.appendTo($('#CompanyLogo'));
                }
            });
        }

        //Agents

        function RedirectToAgents() {
            //$("#SocketServerStatus").show();
            window.location.href = "Agents.aspx";

        }
        function RedirectToDashboard() {
            //$("#SocketServerStatus").hide();
            window.location.href = "Dashboard.aspx";
        }
        function RedirectToLicensing() {
            //$("#SocketServerStatus").hide();
            window.location.href = "Licensing.aspx";
        }


    </script>
</body>
</html>





